{"ast":null,"code":"import _regeneratorRuntime from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { LOAD_PRODUCT_SUCCESS, LOAD_PRODUCT_FAIL, TOGGLE_PRODUCT_STATE, TOGGLE_PRODUCT_STATE_SUCCESS, TOGGLE_PRODUCT_STATE_FAIL, CHANGE_PRODUCTS_STATE_SUCCESS, CHANGE_PRODUCTS_STATE_FAIL } from \"../actions\";\nimport axios from \"axios\";\nimport { tokenPrefix, servicePath } from \"../../constants/defaultValues\";\nexport var getProduct = function getProduct(pageInfo) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch, getState) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", axios.get(\"\".concat(servicePath, \"/products/paging\"), {\n                params: {\n                  pageSize: pageInfo.selectedPageSize,\n                  currentPage: pageInfo.currentPage,\n                  orderBy: pageInfo.selectedOrderOption.column,\n                  search: pageInfo.search\n                },\n                headers: {\n                  'X-API-TOKEN': tokenPrefix + getState().authUser.token\n                }\n              }).then(function (res) {\n                return res.data['data'];\n              }).then(function (data) {\n                dispatch({\n                  type: LOAD_PRODUCT_SUCCESS,\n                  payload: data\n                });\n              }).catch(function (error) {\n                dispatch({\n                  type: LOAD_PRODUCT_FAIL\n                });\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var toggleProductState = function toggleProductState(productId) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: TOGGLE_PRODUCT_STATE,\n      payload: [productId]\n    });\n    axios.post(servicePath + \"/products/toggleActive\", {\n      productId\n    }, {\n      headers: {\n        'X-API-TOKEN': tokenPrefix + getState().authUser.token\n      }\n    }).then(function (response) {\n      return response['data'];\n    }).then(function (data) {\n      if (data['message'] === \"\") {\n        dispatch({\n          type: TOGGLE_PRODUCT_STATE_SUCCESS,\n          payload: productId\n        });\n      } else {\n        dispatch({\n          type: TOGGLE_PRODUCT_STATE_FAIL\n        });\n      }\n    }).catch(function (error) {\n      dispatch({\n        type: TOGGLE_PRODUCT_STATE_FAIL\n      });\n    });\n  };\n};\nexport var changeProductsState = function changeProductsState(productIds, state) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: TOGGLE_PRODUCT_STATE,\n      payload: productIds\n    });\n    axios.post(servicePath + \"/products/changeState\", {\n      productIds: JSON.stringify(productIds),\n      state\n    }, {\n      headers: {\n        'X-API-TOKEN': tokenPrefix + getState().authUser.token\n      }\n    }).then(function (response) {\n      return response['data'];\n    }).then(function (data) {\n      if (data['message'] === \"\") {\n        dispatch({\n          type: CHANGE_PRODUCTS_STATE_SUCCESS,\n          payload: {\n            productIds,\n            state\n          }\n        });\n      } else {\n        dispatch({\n          type: CHANGE_PRODUCTS_STATE_FAIL\n        });\n      }\n    }).catch(function (error) {\n      dispatch({\n        type: CHANGE_PRODUCTS_STATE_FAIL\n      });\n    });\n  };\n};\nexport var deleteProducts = function deleteProducts(productIds) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", axios.delete(\"\".concat(servicePath, \"/products/delete\"), {\n                data: {\n                  productIds: JSON.stringify(productIds)\n                },\n                headers: {\n                  'X-API-TOKEN': tokenPrefix + getState().authUser.token\n                }\n              }).then(function (res) {\n                return res.data['data'];\n              }).then(function (data) {\n                return true;\n              }).catch(function (error) {\n                return false;\n              }));\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/redux/products/actions.js"],"names":["LOAD_PRODUCT_SUCCESS","LOAD_PRODUCT_FAIL","TOGGLE_PRODUCT_STATE","TOGGLE_PRODUCT_STATE_SUCCESS","TOGGLE_PRODUCT_STATE_FAIL","CHANGE_PRODUCTS_STATE_SUCCESS","CHANGE_PRODUCTS_STATE_FAIL","axios","tokenPrefix","servicePath","getProduct","pageInfo","dispatch","getState","get","params","pageSize","selectedPageSize","currentPage","orderBy","selectedOrderOption","column","search","headers","authUser","token","then","res","data","type","payload","catch","error","toggleProductState","productId","post","response","changeProductsState","productIds","state","JSON","stringify","deleteProducts","delete"],"mappings":"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","sourcesContent":["import {\n    LOAD_PRODUCT_SUCCESS,\n    LOAD_PRODUCT_FAIL,\n    TOGGLE_PRODUCT_STATE,\n    TOGGLE_PRODUCT_STATE_SUCCESS,\n    TOGGLE_PRODUCT_STATE_FAIL,\n    CHANGE_PRODUCTS_STATE_SUCCESS,\n    CHANGE_PRODUCTS_STATE_FAIL\n} from \"../actions\";\nimport axios from \"axios\";\nimport {tokenPrefix, servicePath} from \"../../constants/defaultValues\";\n\nexport const getProduct = (pageInfo) => async (dispatch, getState) => {\n    return axios\n        .get(\n            `${servicePath}/products/paging`, {\n                params: {\n                    pageSize: pageInfo.selectedPageSize,\n                    currentPage: pageInfo.currentPage,\n                    orderBy: pageInfo.selectedOrderOption.column,\n                    search: pageInfo.search\n                },\n                headers: {\n                    'X-API-TOKEN': tokenPrefix + getState().authUser.token\n                }\n            }\n        )\n        .then(res => res.data['data'])\n        .then(data => {\n            dispatch({\n                type: LOAD_PRODUCT_SUCCESS,\n                payload: data\n            });\n        })\n        .catch(error => {\n            dispatch({\n                type: LOAD_PRODUCT_FAIL,\n            });\n        });\n}\n\nexport const toggleProductState = (productId) => (dispatch, getState) => {\n    dispatch({\n        type: TOGGLE_PRODUCT_STATE,\n        payload: [productId]\n    });\n    axios\n        .post(servicePath + \"/products/toggleActive\", {\n            productId\n        }, {\n            headers: {\n                'X-API-TOKEN': tokenPrefix + getState().authUser.token\n            }\n        })\n        .then(response => response['data'])\n        .then(data => {\n            if (data['message'] === \"\") {\n                dispatch({\n                    type: TOGGLE_PRODUCT_STATE_SUCCESS,\n                    payload: productId\n                });\n            } else {\n                dispatch({\n                    type: TOGGLE_PRODUCT_STATE_FAIL\n                });\n            }\n\n        })\n        .catch(error => {\n            dispatch({\n                type: TOGGLE_PRODUCT_STATE_FAIL\n            });\n        });\n}\n\nexport const changeProductsState = (productIds, state) => (dispatch, getState) => {\n    dispatch({\n        type: TOGGLE_PRODUCT_STATE,\n        payload: productIds\n    });\n    axios\n        .post(servicePath + \"/products/changeState\", {\n            productIds: JSON.stringify(productIds),\n            state\n        }, {\n            headers: {\n                'X-API-TOKEN': tokenPrefix + getState().authUser.token\n            }\n        })\n        .then(response => response['data'])\n        .then(data => {\n            if (data['message'] === \"\") {\n                dispatch({\n                    type: CHANGE_PRODUCTS_STATE_SUCCESS,\n                    payload: {\n                        productIds,\n                        state\n                    }\n                });\n            } else {\n                dispatch({\n                    type: CHANGE_PRODUCTS_STATE_FAIL\n                });\n            }\n\n        })\n        .catch(error => {\n            dispatch({\n                type: CHANGE_PRODUCTS_STATE_FAIL\n            });\n        });\n}\n\nexport const deleteProducts = (productIds) => async (dispatch, getState) => {\n    return axios\n        .delete(\n            `${servicePath}/products/delete`, {\n                data: {\n                    productIds: JSON.stringify(productIds)\n                },\n                headers: {\n                    'X-API-TOKEN': tokenPrefix + getState().authUser.token\n                }\n            }\n        )\n        .then(res => {\n            return res.data['data'];\n        })\n        .then(data => {\n            return true;\n        })\n        .catch(error => {\n            return false;\n        });\n}"]},"metadata":{},"sourceType":"module"}