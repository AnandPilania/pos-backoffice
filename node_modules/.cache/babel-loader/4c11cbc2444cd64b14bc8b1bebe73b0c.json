{"ast":null,"code":"import _classCallCheck from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/auth/reset-password.js\";\nimport React, { Component } from \"react\";\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from \"reactstrap\";\nimport { NavLink } from \"react-router-dom\";\nimport { Formik, Form, Field } from \"formik\";\nimport { Colxx } from \"../../components/common/CustomBootstrap\";\nimport IntlMessages from \"../../helpers/IntlMessages\";\nimport { resetPassword } from \"../../redux/actions\";\nimport { NotificationManager } from \"../../components/common/react-notifications\";\nimport { connect } from \"react-redux\";\n\nvar ResetPassword =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ResetPassword, _Component);\n\n  function ResetPassword(props) {\n    var _this;\n\n    _classCallCheck(this, ResetPassword);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResetPassword).call(this, props));\n\n    _this.onResetPassword = function (values) {\n      if (!_this.props.loading) {\n        var params = new URLSearchParams(_this.props.location.search);\n        var oobCode = params.get('oobCode');\n\n        if (oobCode) {\n          if (values.newPassword !== \"\") {\n            _this.props.resetPassword({\n              newPassword: values.newPassword,\n              resetPasswordCode: oobCode,\n              history: _this.props.history\n            });\n          }\n        } else {\n          NotificationManager.warning(\"Please check your email url.\", \"Reset Password Error\", 3000, null, null, '');\n        }\n      }\n    };\n\n    _this.validateNewPassword = function (values) {\n      var newPassword = values.newPassword,\n          newPasswordAgain = values.newPasswordAgain;\n      var errors = {};\n\n      if (newPasswordAgain && newPassword !== newPasswordAgain) {\n        errors.newPasswordAgain = \"Please check your new password\";\n      }\n\n      return errors;\n    };\n\n    _this.state = {\n      newPassword: '',\n      newPasswordAgain: ''\n    };\n    return _this;\n  }\n\n  _createClass(ResetPassword, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.error) {\n        NotificationManager.warning(this.props.error, \"Forgot Password Error\", 3000, null, null, '');\n      } else {\n        if (!this.props.loading && this.props.newPassword === \"success\") NotificationManager.success(\"Please login with your new password.\", \"Reset Password Success\", 3000, null, null, '');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          newPassword = _this$state.newPassword,\n          newPasswordAgain = _this$state.newPasswordAgain;\n      var initialValues = {\n        newPassword: newPassword,\n        newPasswordAgain: newPasswordAgain\n      };\n      return React.createElement(Row, {\n        className: \"h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(Colxx, {\n        xxs: \"12\",\n        md: \"10\",\n        className: \"mx-auto my-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"auth-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"position-relative image-side \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-white h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"MAGIC IS IN THE DETAILS\"), React.createElement(\"p\", {\n        className: \"white mb-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Please use your e-mail to reset your password. \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), \"If you are not a member, please\", \" \", React.createElement(NavLink, {\n        to: \"/register\",\n        className: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"register\"), \".\")), React.createElement(\"div\", {\n        className: \"form-side\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        className: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"logo-single\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(CardTitle, {\n        className: \"mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(IntlMessages, {\n        id: \"user.reset-password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })), React.createElement(Formik, {\n        validate: this.validateNewPassword,\n        initialValues: initialValues,\n        onSubmit: this.onResetPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, function (_ref) {\n        var errors = _ref.errors,\n            touched = _ref.touched;\n        return React.createElement(Form, {\n          className: \"av-tooltip tooltip-label-bottom\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(FormGroup, {\n          className: \"form-group has-float-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(IntlMessages, {\n          id: \"user.new-password\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        })), React.createElement(Field, {\n          className: \"form-control\",\n          name: \"newPassword\",\n          type: \"password\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        })), React.createElement(FormGroup, {\n          className: \"form-group has-float-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(Label, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(IntlMessages, {\n          id: \"user.new-password-again\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        })), React.createElement(Field, {\n          className: \"form-control\",\n          name: \"newPasswordAgain\",\n          type: \"password\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }), errors.newPasswordAgain && touched.newPasswordAgain && React.createElement(\"div\", {\n          className: \"invalid-feedback d-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, errors.newPasswordAgain)), React.createElement(\"div\", {\n          className: \"d-flex justify-content-between align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          to: \"/user/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(IntlMessages, {\n          id: \"user.login-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        })), React.createElement(Button, {\n          color: \"primary\",\n          className: \"btn-shadow btn-multiple-state \".concat(_this2.props.loading ? \"show-spinner\" : \"\"),\n          size: \"lg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"spinner d-inline-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"bounce1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"bounce2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"bounce3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        })), React.createElement(\"span\", {\n          className: \"label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(IntlMessages, {\n          id: \"user.reset-password-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        })))));\n      })))));\n    }\n  }]);\n\n  return ResetPassword;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var authUser = _ref2.authUser;\n  var newPassword = authUser.newPassword,\n      resetPasswordCode = authUser.resetPasswordCode,\n      loading = authUser.loading,\n      error = authUser.error;\n  return {\n    newPassword: newPassword,\n    resetPasswordCode: resetPasswordCode,\n    loading: loading,\n    error: error\n  };\n};\n\nexport default connect(mapStateToProps, {\n  resetPassword: resetPassword\n})(ResetPassword);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/auth/reset-password.js"],"names":["React","Component","Row","Card","CardTitle","Label","FormGroup","Button","NavLink","Formik","Form","Field","Colxx","IntlMessages","resetPassword","NotificationManager","connect","ResetPassword","props","onResetPassword","values","loading","params","URLSearchParams","location","search","oobCode","get","newPassword","resetPasswordCode","history","warning","validateNewPassword","newPasswordAgain","errors","state","error","success","initialValues","touched","mapStateToProps","authUser"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { Colxx } from \"../../components/common/CustomBootstrap\";\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nimport { resetPassword } from \"../../redux/actions\";\r\nimport { NotificationManager } from \"../../components/common/react-notifications\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ResetPassword extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            newPassword: '',\r\n            newPasswordAgain: ''\r\n        };\r\n    }\r\n\r\n    onResetPassword = (values) => {\r\n        if (!this.props.loading) {\r\n            const params = new URLSearchParams(this.props.location.search);\r\n            const oobCode = params.get('oobCode');\r\n            if (oobCode) {\r\n                if (values.newPassword !== \"\") {\r\n                    this.props.resetPassword({ newPassword: values.newPassword, resetPasswordCode: oobCode, history: this.props.history });\r\n                }\r\n            } else {\r\n                NotificationManager.warning(\r\n                    \"Please check your email url.\",\r\n                    \"Reset Password Error\",\r\n                    3000,\r\n                    null,\r\n                    null,\r\n                    ''\r\n                );\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    validateNewPassword = (values) => {\r\n        const { newPassword, newPasswordAgain } = values;\r\n        let errors = {};\r\n        if (newPasswordAgain && newPassword !== newPasswordAgain) {\r\n            errors.newPasswordAgain = \"Please check your new password\";\r\n        }\r\n        return errors;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.error) {\r\n            NotificationManager.warning(\r\n                this.props.error,\r\n                \"Forgot Password Error\",\r\n                3000,\r\n                null,\r\n                null,\r\n                ''\r\n            );\r\n        } else {\r\n            if (!this.props.loading && this.props.newPassword === \"success\")\r\n                NotificationManager.success(\r\n                    \"Please login with your new password.\",\r\n                    \"Reset Password Success\",\r\n                    3000,\r\n                    null,\r\n                    null,\r\n                    ''\r\n                );\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const { newPassword, newPasswordAgain } = this.state;\r\n        const initialValues = { newPassword, newPasswordAgain };\r\n\r\n        return (\r\n            <Row className=\"h-100\">\r\n                <Colxx xxs=\"12\" md=\"10\" className=\"mx-auto my-auto\">\r\n                    <Card className=\"auth-card\">\r\n                        <div className=\"position-relative image-side \">\r\n                            <p className=\"text-white h2\">MAGIC IS IN THE DETAILS</p>\r\n                            <p className=\"white mb-0\">\r\n                                Please use your e-mail to reset your password. <br />\r\n                                If you are not a member, please{\" \"}\r\n                                <NavLink to={`/register`} className=\"white\">\r\n                                    register\r\n                </NavLink>\r\n                                .\r\n              </p>\r\n                        </div>\r\n                        <div className=\"form-side\">\r\n                            <NavLink to={`/`} className=\"white\">\r\n                                <span className=\"logo-single\" />\r\n                            </NavLink>\r\n                            <CardTitle className=\"mb-4\">\r\n                                <IntlMessages id=\"user.reset-password\" />\r\n                            </CardTitle>\r\n\r\n                            <Formik\r\n                                validate={this.validateNewPassword}\r\n                                initialValues={initialValues}\r\n                                onSubmit={this.onResetPassword}>\r\n                                {({ errors, touched }) => (\r\n                                    <Form className=\"av-tooltip tooltip-label-bottom\">\r\n                                        <FormGroup className=\"form-group has-float-label\">\r\n                                            <Label>\r\n                                                <IntlMessages id=\"user.new-password\" />\r\n                                            </Label>\r\n                                            <Field\r\n                                                className=\"form-control\"\r\n                                                name=\"newPassword\"\r\n                                                type=\"password\"\r\n                                            />\r\n                                        </FormGroup>\r\n                                        <FormGroup className=\"form-group has-float-label\">\r\n                                            <Label>\r\n                                                <IntlMessages id=\"user.new-password-again\" />\r\n                                            </Label>\r\n                                            <Field\r\n                                                className=\"form-control\"\r\n                                                name=\"newPasswordAgain\"\r\n                                                type=\"password\"\r\n                                            />\r\n                                            {errors.newPasswordAgain && touched.newPasswordAgain && (\r\n                                                <div className=\"invalid-feedback d-block\">\r\n                                                    {errors.newPasswordAgain}\r\n                                                </div>\r\n                                            )}\r\n                                        </FormGroup>\r\n\r\n                                        <div className=\"d-flex justify-content-between align-items-center\">\r\n                                            <NavLink to={`/user/login`}>\r\n                                                <IntlMessages id=\"user.login-title\" />\r\n                                            </NavLink>\r\n                                            <Button\r\n                                                color=\"primary\"\r\n                                                className={`btn-shadow btn-multiple-state ${this.props.loading ? \"show-spinner\" : \"\"}`}\r\n                                                size=\"lg\"\r\n                                            >\r\n                                                <span className=\"spinner d-inline-block\">\r\n                                                    <span className=\"bounce1\" />\r\n                                                    <span className=\"bounce2\" />\r\n                                                    <span className=\"bounce3\" />\r\n                                                </span>\r\n                                                <span className=\"label\"><IntlMessages id=\"user.reset-password-button\" /></span>\r\n                                            </Button>\r\n                                        </div>\r\n                                    </Form>\r\n                                )}\r\n                            </Formik>\r\n                        </div>\r\n                    </Card>\r\n                </Colxx>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ authUser }) => {\r\n    const { newPassword, resetPasswordCode, loading, error } = authUser;\r\n    return { newPassword, resetPasswordCode, loading, error };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        resetPassword\r\n    }\r\n)(ResetPassword);\r\n\r\n"]},"metadata":{},"sourceType":"module"}