{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Card,CustomInput,Badge,ButtonDropdown,DropdownToggle,DropdownMenu,DropdownItem,ModalHeader,ModalBody,ModalFooter,Button,Modal}from\"reactstrap\";import{NavLink}from\"react-router-dom\";import classnames from\"classnames\";import{ContextMenuTrigger}from\"react-contextmenu\";import{Colxx}from\"../../components/common/CustomBootstrap\";import{connect}from\"react-redux\";import{toggleProductState}from\"../../redux/actions\";import{injectIntl}from\"react-intl\";var DataListView=/*#__PURE__*/function(_Component){_inherits(DataListView,_Component);var _super=_createSuper(DataListView);function DataListView(props){var _this;_classCallCheck(this,DataListView);_this=_super.call(this,props);_this.handleToggle=function(e){e.stopPropagation();_this.setState({actionButtonOpen:!_this.state.actionButtonOpen});};_this.handleState=function(){_this.props.toggleProductState(_this.props.product.id);};_this.toggleDeleteConfirmModal=function(){_this.setState({confirmModalOpen:!_this.state.confirmModalOpen});};_this.state={actionButtonOpen:false,confirmModalOpen:false};return _this;}_createClass(DataListView,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,product=_this$props.product,isSelect=_this$props.isSelect,collect=_this$props.collect,onCheckItem=_this$props.onCheckItem,toggleItems=_this$props.toggleItems,onDelete=_this$props.onDelete,intl=_this$props.intl;var _this$state=this.state,actionButtonOpen=_this$state.actionButtonOpen,confirmModalOpen=_this$state.confirmModalOpen;return/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-3\"},/*#__PURE__*/React.createElement(Modal,{isOpen:confirmModalOpen,toggle:this.toggleDeleteConfirmModal},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleDeleteConfirmModal},\"Delete Product\"),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure you want to delete selected product?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return onDelete(product.id);},size:\"lg\",color:\"primary\"},\"Yes\"),/*#__PURE__*/React.createElement(Button,{onClick:this.toggleDeleteConfirmModal,size:\"lg\",outline:true,color:\"secondary\"},\"Cancel\"))),/*#__PURE__*/React.createElement(ContextMenuTrigger,{id:\"menu_id\",data:product.id,collect:collect},/*#__PURE__*/React.createElement(Card,{onClick:function onClick(event){return onCheckItem(event,product.id);},className:classnames(\"d-flex flex-row\",{active:isSelect})},/*#__PURE__*/React.createElement(\"div\",{className:\"pl-2 d-flex flex-grow-1 min-width-zero\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center\"},/*#__PURE__*/React.createElement(NavLink,{to:\"products/edit/\".concat(product.id),className:\"w-40 w-sm-100\"},/*#__PURE__*/React.createElement(\"p\",{className:\"list-item-heading mb-1 truncate\"},product.name)),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 text-muted text-small w-15 w-sm-100\"},product.category.name),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 text-muted text-small w-15 w-sm-100\"},product.currency!==null?product.price+' '+product.currency.name:''),/*#__PURE__*/React.createElement(\"div\",{className:\"w-15 w-sm-100\"},/*#__PURE__*/React.createElement(Badge,{color:toggleItems.indexOf(product.id)!==-1?'info':product.show_flag===1?'primary':'danger',pill:true},toggleItems.indexOf(product.id)!==-1?/*#__PURE__*/React.createElement(\"div\",{className:\"show-spinner badge-multiple-state badge\"},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"}))):product.show_flag===1?intl.messages['pages.active-c']:intl.messages['pages.inactive-c']))),/*#__PURE__*/React.createElement(\"div\",{className:\"pl-1 align-self-center pr-4\"},/*#__PURE__*/React.createElement(ButtonDropdown,{isOpen:actionButtonOpen,toggle:function toggle(e){return _this2.handleToggle(e);}},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,size:\"sm\",outline:true,color:\"primary\"},\"Action\"),/*#__PURE__*/React.createElement(DropdownMenu,null,/*#__PURE__*/React.createElement(NavLink,{to:\"products/edit/\".concat(product.id)},/*#__PURE__*/React.createElement(DropdownItem,null,\"Edit\")),/*#__PURE__*/React.createElement(DropdownItem,{onClick:this.handleState},product.show_flag===1?intl.messages['pages.inactivate']:intl.messages['pages.activate']),/*#__PURE__*/React.createElement(DropdownItem,{onClick:this.toggleDeleteConfirmModal},\"Delete\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control custom-checkbox pl-1 align-self-center pr-4\"},/*#__PURE__*/React.createElement(CustomInput,{className:\"item-check mb-0\",type:\"checkbox\",id:\"check_\".concat(product.id),checked:isSelect,onChange:function onChange(){},label:\"\"}))))));}}]);return DataListView;}(Component);/* React.memo detail : https://reactjs.org/docs/react-api.html#reactpurecomponent  */var mapStateToProps=function mapStateToProps(_ref){var products=_ref.products;var toggleItems=products.toggleItems;return{toggleItems};};export default injectIntl(connect(mapStateToProps,{toggleProductState})(DataListView));","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/containers/products/DataListView.js"],"names":["React","Component","Card","CustomInput","Badge","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","ModalHeader","ModalBody","ModalFooter","Button","Modal","NavLink","classnames","ContextMenuTrigger","Colxx","connect","toggleProductState","injectIntl","DataListView","props","handleToggle","e","stopPropagation","setState","actionButtonOpen","state","handleState","product","id","toggleDeleteConfirmModal","confirmModalOpen","isSelect","collect","onCheckItem","toggleItems","onDelete","intl","event","active","name","category","currency","price","indexOf","show_flag","messages","mapStateToProps","products"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {\r\n  Card,\r\n  CustomInput,\r\n  Badge,\r\n  ButtonDropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter,\r\n  Button,\r\n  Modal\r\n} from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport classnames from \"classnames\";\r\nimport { ContextMenuTrigger } from \"react-contextmenu\";\r\nimport { Colxx } from \"../../components/common/CustomBootstrap\";\r\nimport {connect} from \"react-redux\";\r\nimport {toggleProductState} from \"../../redux/actions\";\r\nimport {injectIntl} from \"react-intl\";\r\n\r\nclass DataListView extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      actionButtonOpen: false,\r\n      confirmModalOpen: false\r\n    };\r\n  }\r\n\r\n  handleToggle = (e) => {\r\n    e.stopPropagation();\r\n    this.setState({\r\n      actionButtonOpen: !this.state.actionButtonOpen\r\n    });\r\n  }\r\n  handleState = () => {\r\n    this.props.toggleProductState(this.props.product.id);\r\n  }\r\n  toggleDeleteConfirmModal = () => {\r\n    this.setState({\r\n      confirmModalOpen: !this.state.confirmModalOpen\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      product, isSelect, collect, onCheckItem, toggleItems, onDelete, intl\r\n    } = this.props;\r\n    const {actionButtonOpen, confirmModalOpen} = this.state;\r\n    return (\r\n        <Colxx xxs=\"12\" className=\"mb-3\">\r\n          <Modal isOpen={confirmModalOpen} toggle={this.toggleDeleteConfirmModal}>\r\n            <ModalHeader toggle={this.toggleDeleteConfirmModal}>Delete Product</ModalHeader>\r\n            <ModalBody>\r\n              Are you sure you want to delete selected product?\r\n            </ModalBody>\r\n            <ModalFooter>\r\n              <Button onClick={() => onDelete(product.id)} size=\"lg\" color=\"primary\">Yes</Button>\r\n              <Button onClick={this.toggleDeleteConfirmModal} size=\"lg\" outline color=\"secondary\">Cancel</Button>\r\n            </ModalFooter>\r\n          </Modal>\r\n          <ContextMenuTrigger id=\"menu_id\" data={product.id} collect={collect}>\r\n            <Card\r\n                onClick={event => onCheckItem(event, product.id)}\r\n                className={classnames(\"d-flex flex-row\", {\r\n                  active: isSelect\r\n                })}\r\n            >\r\n              <div className=\"pl-2 d-flex flex-grow-1 min-width-zero\">\r\n                <div className=\"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center\">\r\n                  <NavLink to={`products/edit/${product.id}`} className=\"w-40 w-sm-100\">\r\n                    <p className=\"list-item-heading mb-1 truncate\">\r\n                      {product.name}\r\n                    </p>\r\n                  </NavLink>\r\n                  <p className=\"mb-1 text-muted text-small w-15 w-sm-100\">\r\n                    {product.category.name}\r\n                  </p>\r\n                  <p className=\"mb-1 text-muted text-small w-15 w-sm-100\">\r\n                    {product.currency !== null ? (product.price + ' ' + product.currency.name) : ''}\r\n                  </p>\r\n                  <div className=\"w-15 w-sm-100\">\r\n                    <Badge color={\r\n                      toggleItems.indexOf(product.id) !== -1 ? 'info' : (product.show_flag === 1 ? 'primary' : 'danger')}\r\n                           pill>\r\n                      {toggleItems.indexOf(product.id) !== -1 ?\r\n                          <div className=\"show-spinner badge-multiple-state badge\">\r\n                            <span className=\"spinner d-inline-block\">\r\n                              <span className=\"bounce1\"/>\r\n                              <span className=\"bounce2\"/>\r\n                              <span className=\"bounce3\"/>\r\n                            </span>\r\n                          </div> : (product.show_flag === 1 ?\r\n                              intl.messages['pages.active-c'] :\r\n                              intl.messages['pages.inactive-c'])}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n                <div className=\"pl-1 align-self-center pr-4\">\r\n                  <ButtonDropdown\r\n                      isOpen={actionButtonOpen}\r\n                      toggle={e => this.handleToggle(e)}\r\n                  >\r\n                    <DropdownToggle caret size=\"sm\" outline color=\"primary\">\r\n                      Action\r\n                    </DropdownToggle>\r\n                    <DropdownMenu>\r\n                      <NavLink to={`products/edit/${product.id}`}>\r\n                        <DropdownItem>Edit</DropdownItem>\r\n                      </NavLink>\r\n                      <DropdownItem onClick={this.handleState}>\r\n                        {product.show_flag === 1 ?\r\n                            intl.messages['pages.inactivate']:\r\n                            intl.messages['pages.activate']}\r\n                      </DropdownItem>\r\n                      <DropdownItem onClick={this.toggleDeleteConfirmModal}>\r\n                        Delete\r\n                      </DropdownItem>\r\n                    </DropdownMenu>\r\n                  </ButtonDropdown>\r\n                </div>\r\n                <div className=\"custom-control custom-checkbox pl-1 align-self-center pr-4\">\r\n                  <CustomInput\r\n                      className=\"item-check mb-0\"\r\n                      type=\"checkbox\"\r\n                      id={`check_${product.id}`}\r\n                      checked={isSelect}\r\n                      onChange={() => {}}\r\n                      label=\"\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          </ContextMenuTrigger>\r\n        </Colxx>\r\n    );\r\n  }\r\n}\r\n\r\n/* React.memo detail : https://reactjs.org/docs/react-api.html#reactpurecomponent  */\r\nconst mapStateToProps = ({products}) => {\r\n  const {toggleItems} = products;\r\n  return {toggleItems};\r\n};\r\nexport default injectIntl(\r\n    connect(\r\n        mapStateToProps,\r\n        {toggleProductState}\r\n    )(DataListView)\r\n);"]},"metadata":{},"sourceType":"module"}