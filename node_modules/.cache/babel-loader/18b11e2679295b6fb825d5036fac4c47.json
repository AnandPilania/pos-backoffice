{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Card,CardTitle,Label,FormGroup,Button}from\"reactstrap\";import{NavLink}from\"react-router-dom\";import{connect}from\"react-redux\";import{NotificationManager}from\"../../components/common/react-notifications\";import{Formik,Form,Field}from\"formik\";import{loginUser}from\"../../redux/actions\";import{Colxx}from\"../../components/common/CustomBootstrap\";import IntlMessages from\"../../helpers/IntlMessages\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.onUserLogin=function(values){if(!_this.props.loading){if(values.email!==\"\"&&values.password!==\"\"){_this.props.loginUser(values,_this.props.history);}}};_this.validateEmail=function(value){var error;if(!value){error=\"Please enter your email address\";}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)){error=\"Invalid email address\";}return error;};_this.validatePassword=function(value){var error;if(!value){error=\"Please enter your password\";}else if(value.length<4){error=\"Value must be longer than 3 characters\";}return error;};_this.state={email:\"carry@gmail.com\",password:\"123456\"};return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.props.error){NotificationManager.warning(this.props.error,\"Login Error\",3000,null,null,'');}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,password=_this$state.password,email=_this$state.email;var initialValues={email,password};return/*#__PURE__*/React.createElement(Row,{className:\"h-100\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",md:\"10\",className:\"mx-auto my-auto\"},/*#__PURE__*/React.createElement(Card,{className:\"auth-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative image-side \"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-white h2\"},\"WELCOME TO PICKITAPPS\"),/*#__PURE__*/React.createElement(\"p\",{className:\"white mb-0\"},\"Please use your credentials to login.\",/*#__PURE__*/React.createElement(\"br\",null),\"If you are not a member, please\",\" \",/*#__PURE__*/React.createElement(NavLink,{to:\"/register\",className:\"white\"},\"register\"),\".\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-side\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"white\"},/*#__PURE__*/React.createElement(\"span\",{className:\"logo-single\"})),/*#__PURE__*/React.createElement(CardTitle,{className:\"mb-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.login-title\"})),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,onSubmit:this.onUserLogin},function(_ref){var errors=_ref.errors,touched=_ref.touched;return/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-bottom\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"form-group has-float-label\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.email\"})),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"email\",validate:_this2.validateEmail}),errors.email&&touched.email&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.email)),/*#__PURE__*/React.createElement(FormGroup,{className:\"form-group has-float-label\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.password\"})),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",type:\"password\",name:\"password\",validate:_this2.validatePassword}),errors.password&&touched.password&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.password)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/user/forgot-password\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.forgot-password-question\"})),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn-shadow btn-multiple-state \".concat(_this2.props.loading?\"show-spinner\":\"\"),size:\"lg\"},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"label\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.login-button\"})))));})))));}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var authUser=_ref2.authUser;var user=authUser.user,loading=authUser.loading,error=authUser.error;return{user,loading,error};};export default connect(mapStateToProps,{loginUser})(Login);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/auth/login.js"],"names":["React","Component","Row","Card","CardTitle","Label","FormGroup","Button","NavLink","connect","NotificationManager","Formik","Form","Field","loginUser","Colxx","IntlMessages","Login","props","onUserLogin","values","loading","email","password","history","validateEmail","value","error","test","validatePassword","length","state","warning","initialValues","errors","touched","mapStateToProps","authUser","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { NotificationManager } from \"../../components/common/react-notifications\";\r\nimport { Formik, Form, Field } from \"formik\";\r\n\r\nimport { loginUser } from \"../../redux/actions\";\r\nimport { Colxx } from \"../../components/common/CustomBootstrap\";\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"carry@gmail.com\",\r\n      password: \"123456\"\r\n    };\r\n  }\r\n\r\n  onUserLogin = (values) => {\r\n    if (!this.props.loading) {\r\n      if (values.email !== \"\" && values.password !== \"\") {\r\n        this.props.loginUser(values, this.props.history);\r\n      }\r\n    }\r\n  }\r\n\r\n  validateEmail = (value) => {\r\n    let error;\r\n    if (!value) {\r\n      error = \"Please enter your email address\";\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\r\n      error = \"Invalid email address\";\r\n    }\r\n    return error;\r\n  }\r\n\r\n  validatePassword = (value) => {\r\n    let error;\r\n    if (!value) {\r\n      error = \"Please enter your password\";\r\n    } else if (value.length < 4) {\r\n      error = \"Value must be longer than 3 characters\";\r\n    }\r\n    return error;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.error) {\r\n      NotificationManager.warning(\r\n        this.props.error,\r\n        \"Login Error\",\r\n        3000,\r\n        null,\r\n        null,\r\n        ''\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { password, email } = this.state;\r\n    const initialValues = {email,password};\r\n\r\n    return (\r\n      <Row className=\"h-100\">\r\n        <Colxx xxs=\"12\" md=\"10\" className=\"mx-auto my-auto\">\r\n          <Card className=\"auth-card\">\r\n            <div className=\"position-relative image-side \">\r\n              <p className=\"text-white h2\">WELCOME TO PICKITAPPS</p>\r\n              <p className=\"white mb-0\">\r\n                Please use your credentials to login.\r\n                <br />\r\n                If you are not a member, please{\" \"}\r\n                <NavLink to={`/register`} className=\"white\">\r\n                  register\r\n                </NavLink>\r\n                .\r\n              </p>\r\n            </div>\r\n            <div className=\"form-side\">\r\n              <NavLink to={`/`} className=\"white\">\r\n                <span className=\"logo-single\" />\r\n              </NavLink>\r\n              <CardTitle className=\"mb-4\">\r\n                <IntlMessages id=\"user.login-title\" />\r\n              </CardTitle>\r\n\r\n              <Formik\r\n                initialValues={initialValues}\r\n                onSubmit={this.onUserLogin}>\r\n                {({ errors, touched }) => (\r\n                  <Form className=\"av-tooltip tooltip-label-bottom\">\r\n                    <FormGroup className=\"form-group has-float-label\">\r\n                      <Label>\r\n                        <IntlMessages id=\"user.email\" />\r\n                      </Label>\r\n                      <Field\r\n                        className=\"form-control\"\r\n                        name=\"email\"\r\n                        validate={this.validateEmail}\r\n                      />\r\n                      {errors.email && touched.email && (\r\n                        <div className=\"invalid-feedback d-block\">\r\n                          {errors.email}\r\n                        </div>\r\n                      )}\r\n                    </FormGroup>\r\n                    <FormGroup className=\"form-group has-float-label\">\r\n                      <Label>\r\n                        <IntlMessages id=\"user.password\" />\r\n                      </Label>\r\n                      <Field\r\n                        className=\"form-control\"\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        validate={this.validatePassword}\r\n                      />\r\n                      {errors.password && touched.password && (\r\n                        <div className=\"invalid-feedback d-block\">\r\n                          {errors.password}\r\n                        </div>\r\n                      )}\r\n                    </FormGroup>\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                      <NavLink to={`/user/forgot-password`}>\r\n                        <IntlMessages id=\"user.forgot-password-question\" />\r\n                      </NavLink>\r\n                      <Button\r\n                        color=\"primary\"\r\n                        className={`btn-shadow btn-multiple-state ${this.props.loading ? \"show-spinner\" : \"\"}`}\r\n                        size=\"lg\"\r\n                      >\r\n                        <span className=\"spinner d-inline-block\">\r\n                          <span className=\"bounce1\" />\r\n                          <span className=\"bounce2\" />\r\n                          <span className=\"bounce3\" />\r\n                        </span>\r\n                        <span className=\"label\"><IntlMessages id=\"user.login-button\" /></span>\r\n                      </Button>\r\n                    </div>\r\n\r\n\r\n                  </Form>\r\n                )}\r\n              </Formik>\r\n            </div>\r\n          </Card>\r\n        </Colxx>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = ({ authUser }) => {\r\n  const { user, loading, error } = authUser;\r\n  return { user, loading, error };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    loginUser\r\n  }\r\n)(Login);\r\n"]},"metadata":{},"sourceType":"module"}