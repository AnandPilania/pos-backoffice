{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{injectIntl}from\"react-intl\";import{UncontrolledDropdown,DropdownItem,DropdownToggle,DropdownMenu}from\"reactstrap\";import{NavLink}from\"react-router-dom\";import{connect}from\"react-redux\";import{setContainerClassnames,clickOnMobileMenu,logoutUser,changeLocale}from\"../../redux/actions\";import{localeOptions,isDarkSwitchActive,mediaPath}from\"../../constants/defaultValues\";import{MobileMenuIcon,MenuIcon}from\"../../components/svg\";import TopnavNotifications from\"./Topnav.Notifications\";import TopnavDarkSwitch from\"./Topnav.DarkSwitch\";import{getDirection,setDirection}from\"../../helpers/Utils\";var TopNav=/*#__PURE__*/function(_Component){_inherits(TopNav,_Component);var _super=_createSuper(TopNav);function TopNav(props){var _this;_classCallCheck(this,TopNav);_this=_super.call(this,props);_this.handleChangeLocale=function(locale,direction){_this.props.changeLocale(locale);var currentDirection=getDirection().direction;if(direction!==currentDirection){setDirection(direction);setTimeout(function(){window.location.reload();},500);}};_this.handleLogout=function(){_this.props.logoutUser(_this.props.history);};_this.menuButtonClick=function(e,menuClickCount,containerClassnames){e.preventDefault();setTimeout(function(){var event=document.createEvent(\"HTMLEvents\");event.initEvent(\"resize\",false,false);window.dispatchEvent(event);},350);_this.props.setContainerClassnames(++menuClickCount,containerClassnames,_this.props.selectedMenuHasSubItems);};_this.mobileMenuButtonClick=function(e,containerClassnames){e.preventDefault();_this.props.clickOnMobileMenu(containerClassnames);};_this.state={isInFullScreen:false,searchKeyword:\"\"};return _this;}_createClass(TopNav,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,containerClassnames=_this$props.containerClassnames,menuClickCount=_this$props.menuClickCount,locale=_this$props.locale;return/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar fixed-top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center navbar-left\"},/*#__PURE__*/React.createElement(NavLink,{to:\"#\",location:{},className:\"menu-button d-none d-md-block\",onClick:function onClick(e){return _this2.menuButtonClick(e,menuClickCount,containerClassnames);}},/*#__PURE__*/React.createElement(MenuIcon,null)),/*#__PURE__*/React.createElement(NavLink,{to:\"#\",location:{},className:\"menu-button-mobile d-xs-block d-sm-block d-md-none\",onClick:function onClick(e){return _this2.mobileMenuButtonClick(e,containerClassnames);}},/*#__PURE__*/React.createElement(MobileMenuIcon,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline-block\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"ml-2\"},/*#__PURE__*/React.createElement(DropdownToggle,{caret:true,color:\"light\",size:\"sm\",className:\"language-button\"},/*#__PURE__*/React.createElement(\"span\",{className:\"name\"},locale.toUpperCase())),/*#__PURE__*/React.createElement(DropdownMenu,{className:\"mt-3\",right:true},localeOptions.map(function(l){return/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return _this2.handleChangeLocale(l.id,l.direction);},key:l.id},l.name);}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-right\"},isDarkSwitchActive&&/*#__PURE__*/React.createElement(TopnavDarkSwitch,null),/*#__PURE__*/React.createElement(\"div\",{className:\"header-icons d-inline-block align-middle\"},/*#__PURE__*/React.createElement(TopnavNotifications,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"user d-inline-block\"},/*#__PURE__*/React.createElement(UncontrolledDropdown,{className:\"dropdown-menu-right\"},/*#__PURE__*/React.createElement(DropdownToggle,{className:\"p-0\",color:\"empty\"},/*#__PURE__*/React.createElement(\"span\",{className:\"name mr-1\"},this.props.loginUser?this.props.loginUser.first_name+' '+this.props.loginUser.last_name:''),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"img\",{alt:\"Profile\",src:this.props.company_logo!==undefined?\"\".concat(mediaPath,\"/company_logos/\").concat(this.props.company_logo):'/assets/img/profile-pic-l.jpg'}))),/*#__PURE__*/React.createElement(DropdownMenu,{className:\"mt-3\",right:true},/*#__PURE__*/React.createElement(DropdownItem,null,\"Profile\"),/*#__PURE__*/React.createElement(DropdownItem,null,\"Account\"),/*#__PURE__*/React.createElement(DropdownItem,{divider:true}),/*#__PURE__*/React.createElement(DropdownItem,{onClick:function onClick(){return _this2.handleLogout();}},\"Sign out\"))))));}}]);return TopNav;}(Component);var mapStateToProps=function mapStateToProps(_ref){var menu=_ref.menu,settings=_ref.settings,authUser=_ref.authUser;var containerClassnames=menu.containerClassnames,menuClickCount=menu.menuClickCount,selectedMenuHasSubItems=menu.selectedMenuHasSubItems;var locale=settings.locale;var loginUser=authUser.user;return{containerClassnames,menuClickCount,selectedMenuHasSubItems,locale,loginUser};};export default injectIntl(connect(mapStateToProps,{setContainerClassnames,clickOnMobileMenu,logoutUser,changeLocale})(TopNav));","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/containers/navs/Topnav.js"],"names":["React","Component","injectIntl","UncontrolledDropdown","DropdownItem","DropdownToggle","DropdownMenu","NavLink","connect","setContainerClassnames","clickOnMobileMenu","logoutUser","changeLocale","localeOptions","isDarkSwitchActive","mediaPath","MobileMenuIcon","MenuIcon","TopnavNotifications","TopnavDarkSwitch","getDirection","setDirection","TopNav","props","handleChangeLocale","locale","direction","currentDirection","setTimeout","window","location","reload","handleLogout","history","menuButtonClick","e","menuClickCount","containerClassnames","preventDefault","event","document","createEvent","initEvent","dispatchEvent","selectedMenuHasSubItems","mobileMenuButtonClick","state","isInFullScreen","searchKeyword","toUpperCase","map","l","id","name","loginUser","first_name","last_name","company_logo","undefined","mapStateToProps","menu","settings","authUser","user"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {injectIntl} from \"react-intl\";\r\nimport {\r\n    UncontrolledDropdown,\r\n    DropdownItem,\r\n    DropdownToggle,\r\n    DropdownMenu,\r\n} from \"reactstrap\";\r\n\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport {\r\n    setContainerClassnames,\r\n    clickOnMobileMenu,\r\n    logoutUser,\r\n    changeLocale\r\n} from \"../../redux/actions\";\r\n\r\nimport {\r\n    localeOptions,\r\n    isDarkSwitchActive,\r\n    mediaPath\r\n} from \"../../constants/defaultValues\";\r\n\r\nimport {MobileMenuIcon, MenuIcon} from \"../../components/svg\";\r\nimport TopnavNotifications from \"./Topnav.Notifications\";\r\nimport TopnavDarkSwitch from \"./Topnav.DarkSwitch\";\r\n\r\nimport {getDirection, setDirection} from \"../../helpers/Utils\";\r\n\r\nclass TopNav extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isInFullScreen: false,\r\n            searchKeyword: \"\"\r\n        };\r\n    }\r\n\r\n    handleChangeLocale = (locale, direction) => {\r\n        this.props.changeLocale(locale);\r\n\r\n        const currentDirection = getDirection().direction;\r\n        if (direction !== currentDirection) {\r\n            setDirection(direction);\r\n            setTimeout(() => {\r\n                window.location.reload();\r\n            }, 500);\r\n        }\r\n    };\r\n\r\n    handleLogout = () => {\r\n        this.props.logoutUser(this.props.history);\r\n    };\r\n\r\n    menuButtonClick = (e, menuClickCount, containerClassnames) => {\r\n        e.preventDefault();\r\n\r\n        setTimeout(() => {\r\n            var event = document.createEvent(\"HTMLEvents\");\r\n            event.initEvent(\"resize\", false, false);\r\n            window.dispatchEvent(event);\r\n        }, 350);\r\n        this.props.setContainerClassnames(\r\n            ++menuClickCount,\r\n            containerClassnames,\r\n            this.props.selectedMenuHasSubItems\r\n        );\r\n    };\r\n    mobileMenuButtonClick = (e, containerClassnames) => {\r\n        e.preventDefault();\r\n        this.props.clickOnMobileMenu(containerClassnames);\r\n    };\r\n\r\n    render() {\r\n        const {containerClassnames, menuClickCount, locale} = this.props;\r\n        return (\r\n            <nav className=\"navbar fixed-top\">\r\n                <div className=\"d-flex align-items-center navbar-left\">\r\n                    <NavLink\r\n                        to=\"#\" location={{}}\r\n                        className=\"menu-button d-none d-md-block\"\r\n                        onClick={e =>\r\n                            this.menuButtonClick(e, menuClickCount, containerClassnames)\r\n                        }\r\n                    >\r\n                        <MenuIcon/>\r\n                    </NavLink>\r\n                    <NavLink\r\n                        to=\"#\" location={{}}\r\n                        className=\"menu-button-mobile d-xs-block d-sm-block d-md-none\"\r\n                        onClick={e => this.mobileMenuButtonClick(e, containerClassnames)}\r\n                    >\r\n                        <MobileMenuIcon/>\r\n                    </NavLink>\r\n\r\n                    <div className=\"d-inline-block\">\r\n                        <UncontrolledDropdown className=\"ml-2\">\r\n                            <DropdownToggle\r\n                                caret\r\n                                color=\"light\"\r\n                                size=\"sm\"\r\n                                className=\"language-button\"\r\n                            >\r\n                                <span className=\"name\">{locale.toUpperCase()}</span>\r\n                            </DropdownToggle>\r\n                            <DropdownMenu className=\"mt-3\" right>\r\n                                {localeOptions.map(l => {\r\n                                    return (\r\n                                        <DropdownItem\r\n                                            onClick={() => this.handleChangeLocale(l.id, l.direction)}\r\n                                            key={l.id}\r\n                                        >\r\n                                            {l.name}\r\n                                        </DropdownItem>\r\n                                    );\r\n                                })}\r\n                            </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"navbar-right\">\r\n                    {isDarkSwitchActive && <TopnavDarkSwitch/>}\r\n\r\n                    <div className=\"header-icons d-inline-block align-middle\">\r\n\r\n                        <TopnavNotifications/>\r\n                    </div>\r\n                    <div className=\"user d-inline-block\">\r\n                        <UncontrolledDropdown className=\"dropdown-menu-right\">\r\n                            <DropdownToggle className=\"p-0\" color=\"empty\">\r\n                                <span className=\"name mr-1\">{this.props.loginUser ? this.props.loginUser.first_name + ' ' + this.props.loginUser.last_name : ''}</span>\r\n                                <span>\r\n                  <img alt=\"Profile\" src={\r\n                      this.props.company_logo !== undefined\r\n                          ? `${mediaPath}/company_logos/${this.props.company_logo}`\r\n                          : '/assets/img/profile-pic-l.jpg'\r\n                          }/>\r\n                </span>\r\n                            </DropdownToggle>\r\n                            <DropdownMenu className=\"mt-3\" right>\r\n                                <DropdownItem>Profile</DropdownItem>\r\n                                <DropdownItem>Account</DropdownItem>\r\n                                <DropdownItem divider/>\r\n                                <DropdownItem onClick={() => this.handleLogout()}>\r\n                                    Sign out\r\n                                </DropdownItem>\r\n                            </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({menu, settings, authUser}) => {\r\n    const {containerClassnames, menuClickCount, selectedMenuHasSubItems} = menu;\r\n    const {locale} = settings;\r\n    const {user: loginUser} = authUser;\r\n    return {\r\n        containerClassnames,\r\n        menuClickCount,\r\n        selectedMenuHasSubItems,\r\n        locale,\r\n        loginUser\r\n    };\r\n};\r\nexport default injectIntl(\r\n    connect(\r\n        mapStateToProps,\r\n        {setContainerClassnames, clickOnMobileMenu, logoutUser, changeLocale}\r\n    )(TopNav)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}