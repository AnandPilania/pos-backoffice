{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectWithoutProperties from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{Component,Suspense}from'react';import{connect}from'react-redux';import{BrowserRouter as Router,Route,Switch,Redirect}from'react-router-dom';import{IntlProvider}from'react-intl';import AppLocale from'./lang';import ColorSwitcher from'./components/common/ColorSwitcher';import NotificationContainer from'./components/common/react-notifications/NotificationContainer';import{isMultiColorActive,isDemo}from'./constants/defaultValues';import{getDirection}from'./helpers/Utils';var ViewMain=React.lazy(function(){return import(/* webpackChunkName: \"views\" */'./views');});var ViewAuth=React.lazy(function(){return import(/* webpackChunkName: \"views-app\" */'./views/auth');});var ViewMySite=React.lazy(function(){return import(/* webpackChunkName: \"views-app\" */'./views/my-site');});var ViewProducts=React.lazy(function(){return import(/* webpackChunkName: \"views-app\" */'./views/products');});var ViewPeople=React.lazy(function(){return import(/* webpackChunkName: \"views-app\" */'./views/people');});var ViewReports=React.lazy(function(){return import(/* webpackChunkName: \"views-app\" */'./views/reports');});var ViewError=React.lazy(function(){return import(/* webpackChunkName: \"views-error\" */'./views/error');});var AuthRoute=function AuthRoute(_ref){var Component=_ref.component,authUser=_ref.authUser,rest=_objectWithoutProperties(_ref,[\"component\",\"authUser\"]);return/*#__PURE__*/React.createElement(Route,Object.assign({},rest,{render:function render(props){return authUser||isDemo?/*#__PURE__*/React.createElement(Component,props):/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/auth/login',state:{from:props.location}}});}}));};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);var direction=getDirection();if(direction.isRtl){document.body.classList.add('rtl');document.body.classList.remove('ltr');}else{document.body.classList.add('ltr');document.body.classList.remove('rtl');}return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$props=this.props,locale=_this$props.locale,loginUser=_this$props.loginUser;var currentAppLocale=AppLocale[locale];return/*#__PURE__*/React.createElement(\"div\",{className:\"h-100\"},/*#__PURE__*/React.createElement(IntlProvider,{locale:currentAppLocale.locale,messages:currentAppLocale.messages},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NotificationContainer,null),isMultiColorActive&&/*#__PURE__*/React.createElement(ColorSwitcher,null),/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"})},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(AuthRoute,{path:\"/products\",authUser:loginUser,component:ViewProducts}),/*#__PURE__*/React.createElement(Route,{path:\"/auth\",render:function render(props){return/*#__PURE__*/React.createElement(ViewAuth,props);}}),/*#__PURE__*/React.createElement(AuthRoute,{path:\"/my-site\",authUser:loginUser,component:ViewMySite}),/*#__PURE__*/React.createElement(AuthRoute,{path:\"/people\",authUser:loginUser,component:ViewPeople}),/*#__PURE__*/React.createElement(AuthRoute,{path:\"/reports\",authUser:loginUser,component:ViewReports}),/*#__PURE__*/React.createElement(Route,{path:\"/error\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(ViewError,props);}}),/*#__PURE__*/React.createElement(Route,{path:\"/\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(ViewMain,props);}}),/*#__PURE__*/React.createElement(Redirect,{to:\"/error\"})))))));}}]);return App;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var authUser=_ref2.authUser,settings=_ref2.settings;var loginUser=authUser.token;var locale=settings.locale;return{loginUser,locale};};export default connect(mapStateToProps,{})(App);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/App.js"],"names":["React","Component","Suspense","connect","BrowserRouter","Router","Route","Switch","Redirect","IntlProvider","AppLocale","ColorSwitcher","NotificationContainer","isMultiColorActive","isDemo","getDirection","ViewMain","lazy","ViewAuth","ViewMySite","ViewProducts","ViewPeople","ViewReports","ViewError","AuthRoute","component","authUser","rest","props","pathname","state","from","location","App","direction","isRtl","document","body","classList","add","remove","locale","loginUser","currentAppLocale","messages","mapStateToProps","settings","token"],"mappings":"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","sourcesContent":["import React, {Component, Suspense} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Route,\r\n    Switch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport {IntlProvider} from 'react-intl';\r\nimport AppLocale from './lang';\r\nimport ColorSwitcher from './components/common/ColorSwitcher';\r\nimport NotificationContainer from './components/common/react-notifications/NotificationContainer';\r\nimport {isMultiColorActive, isDemo} from './constants/defaultValues';\r\nimport {getDirection} from './helpers/Utils';\r\n\r\nconst ViewMain = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views\" */ './views')\r\n);\r\nconst ViewAuth = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-app\" */ './views/auth')\r\n);\r\nconst ViewMySite = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-app\" */ './views/my-site')\r\n);\r\nconst ViewProducts = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-app\" */ './views/products')\r\n);\r\nconst ViewPeople = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-app\" */ './views/people')\r\n);\r\nconst ViewReports = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-app\" */ './views/reports')\r\n);\r\nconst ViewError = React.lazy(() =>\r\n    import(/* webpackChunkName: \"views-error\" */ './views/error')\r\n);\r\n\r\nconst AuthRoute = ({component: Component, authUser, ...rest}) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props =>\r\n                authUser || isDemo ? (\r\n                    <Component {...props} />\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/auth/login',\r\n                            state: {from: props.location}\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const direction = getDirection();\r\n        if (direction.isRtl) {\r\n            document.body.classList.add('rtl');\r\n            document.body.classList.remove('ltr');\r\n        } else {\r\n            document.body.classList.add('ltr');\r\n            document.body.classList.remove('rtl');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {locale, loginUser} = this.props;\r\n        const currentAppLocale = AppLocale[locale];\r\n\r\n        return (\r\n            <div className=\"h-100\">\r\n                <IntlProvider\r\n                    locale={currentAppLocale.locale}\r\n                    messages={currentAppLocale.messages}\r\n                >\r\n                    <React.Fragment>\r\n                        <NotificationContainer/>\r\n                        {isMultiColorActive && <ColorSwitcher/>}\r\n                        <Suspense fallback={<div className=\"loading\"/>}>\r\n                            <Router>\r\n                                <Switch>\r\n                                    <AuthRoute\r\n                                        path=\"/products\"\r\n                                        authUser={loginUser}\r\n                                        component={ViewProducts}\r\n                                    />\r\n                                    <Route\r\n                                        path=\"/auth\"\r\n                                        render={props => <ViewAuth {...props} />}\r\n                                    />\r\n                                    <AuthRoute\r\n                                        path=\"/my-site\"\r\n                                        authUser={loginUser}\r\n                                        component={ViewMySite}\r\n                                    />\r\n                                    <AuthRoute\r\n                                        path=\"/people\"\r\n                                        authUser={loginUser}\r\n                                        component={ViewPeople}\r\n                                    />\r\n                                    <AuthRoute\r\n                                        path=\"/reports\"\r\n                                        authUser={loginUser}\r\n                                        component={ViewReports}\r\n                                    />\r\n                                    <Route\r\n                                        path=\"/error\"\r\n                                        exact\r\n                                        render={props => <ViewError {...props} />}\r\n                                    />\r\n                                    <Route\r\n                                        path=\"/\"\r\n                                        exact\r\n                                        render={props => <ViewMain {...props} />}\r\n                                    />\r\n                                    <Redirect to=\"/error\"/>\r\n                                </Switch>\r\n                            </Router>\r\n                        </Suspense>\r\n                    </React.Fragment>\r\n                </IntlProvider>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({authUser, settings}) => {\r\n    const {token: loginUser} = authUser;\r\n    const {locale} = settings;\r\n    return {loginUser, locale};\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(App);\r\n"]},"metadata":{},"sourceType":"module"}