{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{CustomInput,Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Label}from\"reactstrap\";import IntlMessages from\"../../helpers/IntlMessages\";import axios from\"axios\";import{servicePath,tokenPrefix}from\"../../constants/defaultValues\";import{NotificationManager}from\"../../components/common/react-notifications\";import errorMessage from\"../../constants/errorMessages\";import{connect}from\"react-redux\";var AddNewModal=/*#__PURE__*/function(_Component){_inherits(AddNewModal,_Component);var _super=_createSuper(AddNewModal);function AddNewModal(props){var _this;_classCallCheck(this,AddNewModal);_this=_super.call(this,props);_this.onChange=function(e){_this.setState({[e.target.name]:e.target.value});};_this.onStatusChange=function(e){_this.setState({status:e.target.value});};_this.onSubmit=function(){var _this$state=_this.state,name=_this$state.name,status=_this$state.status,loading=_this$state.loading,description=_this$state.description,category=_this$state.category;if(!loading&&name!==\"\"&&category!==\"0\"){_this.setState({loading:true});axios.post(servicePath+\"/products/add\",{name,description,status,category},{headers:{'X-API-TOKEN':tokenPrefix+_this.props.apiToken}}).then(function(response){_this.setState({name:\"\",status:\"\",description:\"\",category:\"0\",loading:false});if(response.status===200&&response.data['message']===\"\"){NotificationManager.success(\"Product Successfully Added\",\"Success\",3000,null,null,'');_this.props.history.push(_this.props.match.url+'/edit/'+response.data['data']);}else{var errorCode=response.data['message'];NotificationManager.warning(errorMessage[errorCode],\"Error\",3000,null,null,'');}}).catch(function(error){_this.setState({name:\"\",status:\"\",description:\"\",category:\"0\",loading:false});NotificationManager.warning(error,\"Error\",3000,null,null,'');});}};_this.state={name:\"\",description:\"\",status:\"\",loading:false,category:\"0\"};return _this;}_createClass(AddNewModal,[{key:\"render\",value:function render(){var _this$props=this.props,modalOpen=_this$props.modalOpen,toggleModal=_this$props.toggleModal,categories=_this$props.categories;return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,toggle:toggleModal,wrapClassName:\"modal-right\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.add-new-modal-title\"})),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.product-name\"})),/*#__PURE__*/React.createElement(Input,{name:\"name\",onChange:this.onChange}),/*#__PURE__*/React.createElement(Label,{className:\"mt-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.category\"})),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"category\",onChange:this.onChange},/*#__PURE__*/React.createElement(\"option\",{value:\"0\"},\"Select category\"),categories.map(function(category,index){return/*#__PURE__*/React.createElement(\"option\",{value:category.value,key:index},category.label);})),/*#__PURE__*/React.createElement(Label,{className:\"mt-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.description\"})),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",name:\"description\",id:\"exampleText\",onChange:this.onChange}),/*#__PURE__*/React.createElement(Label,{className:\"mt-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.status\"})),/*#__PURE__*/React.createElement(CustomInput,{type:\"radio\",id:\"exCustomRadio\",name:\"customRadio\",label:\"ON HOLD\",value:\"0\",onChange:this.onStatusChange}),/*#__PURE__*/React.createElement(CustomInput,{type:\"radio\",id:\"exCustomRadio2\",name:\"customRadio\",label:\"PROCESSED\",value:\"1\",onChange:this.onStatusChange})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"secondary\",outline:true,onClick:toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.cancel\"})),/*#__PURE__*/React.createElement(Button,{onClick:this.onSubmit,color:\"primary\",className:\"btn-shadow btn-multiple-state \".concat(this.state.loading?\"show-spinner\":\"\")},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"label\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.submit\"}))),\" \"));}}]);return AddNewModal;}(Component);var mapStateToProps=function mapStateToProps(_ref){var authUser=_ref.authUser;var apiToken=authUser.token;return{apiToken};};export default connect(mapStateToProps,{})(AddNewModal);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/containers/products/AddNewModal.js"],"names":["React","Component","CustomInput","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Label","IntlMessages","axios","servicePath","tokenPrefix","NotificationManager","errorMessage","connect","AddNewModal","props","onChange","e","setState","target","name","value","onStatusChange","status","onSubmit","state","loading","description","category","post","headers","apiToken","then","response","data","success","history","push","match","url","errorCode","warning","catch","error","modalOpen","toggleModal","categories","map","index","label","mapStateToProps","authUser","token"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {\r\n    CustomInput,\r\n    Button,\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter,\r\n    Input,\r\n    Label\r\n} from \"reactstrap\";\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nimport axios from \"axios\";\r\nimport {servicePath, tokenPrefix} from \"../../constants/defaultValues\";\r\nimport {NotificationManager} from \"../../components/common/react-notifications\";\r\nimport errorMessage from \"../../constants/errorMessages\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass AddNewModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            description: \"\",\r\n            status: \"\",\r\n            loading: false,\r\n            category: \"0\"\r\n        };\r\n    }\r\n\r\n    onChange = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        });\r\n    }\r\n\r\n    onStatusChange = e => {\r\n        this.setState({\r\n            status: e.target.value\r\n        });\r\n    }\r\n\r\n    onSubmit = () => {\r\n        const {name, status, loading, description, category} = this.state;\r\n\r\n        if (!loading && name !== \"\" && category !== \"0\") {\r\n            this.setState({loading: true});\r\n            axios\r\n                .post(servicePath + \"/products/add\", {\r\n                    name,\r\n                    description,\r\n                    status,\r\n                    category\r\n                }, {\r\n                    headers: {\r\n                        'X-API-TOKEN': tokenPrefix + this.props.apiToken\r\n                    }\r\n                })\r\n                .then(response => {\r\n                    this.setState({\r\n                        name: \"\",\r\n                        status: \"\",\r\n                        description: \"\",\r\n                        category: \"0\",\r\n                        loading: false\r\n                    });\r\n                    if (response.status === 200 && response.data['message'] === \"\") {\r\n                        NotificationManager.success(\r\n                            \"Product Successfully Added\",\r\n                            \"Success\",\r\n                            3000,\r\n                            null,\r\n                            null,\r\n                            ''\r\n                        );\r\n                        this.props.history.push(this.props.match.url + '/edit/' + response.data['data']);\r\n                    } else {\r\n                        const errorCode = response.data['message'];\r\n                        NotificationManager.warning(\r\n                            errorMessage[errorCode],\r\n                            \"Error\",\r\n                            3000,\r\n                            null,\r\n                            null,\r\n                            ''\r\n                        );\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        name: \"\",\r\n                        status: \"\",\r\n                        description: \"\",\r\n                        category: \"0\",\r\n                        loading: false\r\n                    });\r\n                    NotificationManager.warning(\r\n                        error,\r\n                        \"Error\",\r\n                        3000,\r\n                        null,\r\n                        null,\r\n                        ''\r\n                    );\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const {modalOpen, toggleModal, categories} = this.props;\r\n        return (\r\n            <Modal\r\n                isOpen={modalOpen}\r\n                toggle={toggleModal}\r\n                wrapClassName=\"modal-right\"\r\n                backdrop=\"static\"\r\n            >\r\n                <ModalHeader toggle={toggleModal}>\r\n                    <IntlMessages id=\"pages.add-new-modal-title\"/>\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    <Label>\r\n                        <IntlMessages id=\"pages.product-name\"/>\r\n                    </Label>\r\n                    <Input name=\"name\" onChange={this.onChange}/>\r\n                    <Label className=\"mt-4\">\r\n                        <IntlMessages id=\"pages.category\"/>\r\n                    </Label>\r\n                    <Input type=\"select\" name=\"category\" onChange={this.onChange}>\r\n                        <option value=\"0\">Select category</option>\r\n                        {\r\n                            categories.map((category, index) =>\r\n                                <option value={category.value} key={index}>{category.label}</option>\r\n                            )\r\n                        }\r\n                    </Input>\r\n                    <Label className=\"mt-4\">\r\n                        <IntlMessages id=\"pages.description\"/>\r\n                    </Label>\r\n                    <Input type=\"textarea\" name=\"description\" id=\"exampleText\" onChange={this.onChange}/>\r\n                    <Label className=\"mt-4\">\r\n                        <IntlMessages id=\"pages.status\"/>\r\n                    </Label>\r\n                    <CustomInput\r\n                        type=\"radio\"\r\n                        id=\"exCustomRadio\"\r\n                        name=\"customRadio\"\r\n                        label=\"ON HOLD\"\r\n                        value=\"0\"\r\n                        onChange={this.onStatusChange}\r\n                    />\r\n                    <CustomInput\r\n                        type=\"radio\"\r\n                        id=\"exCustomRadio2\"\r\n                        name=\"customRadio\"\r\n                        label=\"PROCESSED\"\r\n                        value=\"1\"\r\n                        onChange={this.onStatusChange}\r\n                    />\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <Button color=\"secondary\" outline onClick={toggleModal}>\r\n                        <IntlMessages id=\"pages.cancel\"/>\r\n                    </Button>\r\n                    <Button\r\n                        onClick={this.onSubmit}\r\n                        color=\"primary\"\r\n                        className={`btn-shadow btn-multiple-state ${this.state.loading ? \"show-spinner\" : \"\"}`}\r\n                    >\r\n                        <span className=\"spinner d-inline-block\">\r\n                          <span className=\"bounce1\" />\r\n                          <span className=\"bounce2\" />\r\n                          <span className=\"bounce3\" />\r\n                        </span>\r\n                        <span className=\"label\"><IntlMessages id=\"pages.submit\" /></span>\r\n                    </Button>{\" \"}\r\n                </ModalFooter>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({authUser}) => {\r\n    const {token: apiToken} = authUser;\r\n    return {apiToken};\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(AddNewModal);"]},"metadata":{},"sourceType":"module"}