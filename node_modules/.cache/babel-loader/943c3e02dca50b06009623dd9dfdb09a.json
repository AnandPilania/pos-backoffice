{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Card,CardTitle,Label,FormGroup,Button}from\"reactstrap\";import{NavLink}from\"react-router-dom\";import{Formik,Form,Field}from\"formik\";import{Colxx}from\"../../components/common/CustomBootstrap\";import IntlMessages from\"../../helpers/IntlMessages\";import{forgotPassword}from\"../../redux/actions\";import{NotificationManager}from\"../../components/common/react-notifications\";import{connect}from\"react-redux\";var ForgotPassword=/*#__PURE__*/function(_Component){_inherits(ForgotPassword,_Component);var _super=_createSuper(ForgotPassword);function ForgotPassword(props){var _this;_classCallCheck(this,ForgotPassword);_this=_super.call(this,props);_this.onForgotPassword=function(values){if(!_this.props.loading){if(values.email!==\"\"){_this.props.forgotPassword(values,_this.props.history);}}};_this.validateEmail=function(value){var error;if(!value){error=\"Please enter your email address\";}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)){error=\"Invalid email address\";}return error;};_this.state={email:\"demo@gogo.com\"};return _this;}_createClass(ForgotPassword,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.props.error){NotificationManager.warning(this.props.error,\"Forgot Password Error\",3000,null,null,'');}else{if(!this.props.loading&&this.props.forgotUserMail===\"success\")NotificationManager.success(\"Please check your email.\",\"Forgot Password Success\",3000,null,null,'');}}},{key:\"render\",value:function render(){var _this2=this;var email=this.state.email;var initialValues={email};return/*#__PURE__*/React.createElement(Row,{className:\"h-100\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",md:\"10\",className:\"mx-auto my-auto\"},/*#__PURE__*/React.createElement(Card,{className:\"auth-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative image-side \"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-white h2\"},\"WELCOME TO PICKITAPPS\"),/*#__PURE__*/React.createElement(\"p\",{className:\"white mb-0\"},\"Please use your e-mail to reset your password. \",/*#__PURE__*/React.createElement(\"br\",null),\"If you are not a member, please\",\" \",/*#__PURE__*/React.createElement(NavLink,{to:\"/register\",className:\"white\"},\"register\"),\".\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-side\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"white\"},/*#__PURE__*/React.createElement(\"span\",{className:\"logo-single\"})),/*#__PURE__*/React.createElement(CardTitle,{className:\"mb-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.forgot-password\"})),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,onSubmit:this.onForgotPassword},function(_ref){var errors=_ref.errors,touched=_ref.touched;return/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-bottom\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"form-group has-float-label\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.email\"})),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"email\",validate:_this2.validateEmail}),errors.email&&touched.email&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/user/forgot-password\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.forgot-password-question\"})),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn-shadow btn-multiple-state \".concat(_this2.props.loading?\"show-spinner\":\"\"),size:\"lg\"},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"label\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.reset-password-button\"})))));})))));}}]);return ForgotPassword;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var authUser=_ref2.authUser;var forgotUserMail=authUser.forgotUserMail,loading=authUser.loading,error=authUser.error;return{forgotUserMail,loading,error};};export default connect(mapStateToProps,{forgotPassword})(ForgotPassword);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/auth/forgot-password.js"],"names":["React","Component","Row","Card","CardTitle","Label","FormGroup","Button","NavLink","Formik","Form","Field","Colxx","IntlMessages","forgotPassword","NotificationManager","connect","ForgotPassword","props","onForgotPassword","values","loading","email","history","validateEmail","value","error","test","state","warning","forgotUserMail","success","initialValues","errors","touched","mapStateToProps","authUser"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from \"reactstrap\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { Colxx } from \"../../components/common/CustomBootstrap\";\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nimport { forgotPassword } from \"../../redux/actions\";\r\nimport { NotificationManager } from \"../../components/common/react-notifications\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ForgotPassword extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"demo@gogo.com\"\r\n    };\r\n  }\r\n\r\n  onForgotPassword = (values) => {\r\n    if (!this.props.loading) {\r\n      if (values.email !== \"\") {\r\n        this.props.forgotPassword(values, this.props.history);\r\n      }\r\n    }\r\n  }\r\n\r\n  validateEmail = (value) => {\r\n    let error;\r\n    if (!value) {\r\n      error = \"Please enter your email address\";\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\r\n      error = \"Invalid email address\";\r\n    }\r\n    return error;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.error) {\r\n      NotificationManager.warning(\r\n        this.props.error,\r\n        \"Forgot Password Error\",\r\n        3000,\r\n        null,\r\n        null,\r\n        ''\r\n      );\r\n    } else {\r\n      if (!this.props.loading && this.props.forgotUserMail === \"success\")\r\n        NotificationManager.success(\r\n          \"Please check your email.\",\r\n          \"Forgot Password Success\",\r\n          3000,\r\n          null,\r\n          null,\r\n          ''\r\n        );\r\n    }\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    const { email } = this.state;\r\n    const initialValues = { email };\r\n\r\n    return (\r\n      <Row className=\"h-100\">\r\n        <Colxx xxs=\"12\" md=\"10\" className=\"mx-auto my-auto\">\r\n          <Card className=\"auth-card\">\r\n            <div className=\"position-relative image-side \">\r\n              <p className=\"text-white h2\">WELCOME TO PICKITAPPS</p>\r\n              <p className=\"white mb-0\">\r\n                Please use your e-mail to reset your password. <br />\r\n                If you are not a member, please{\" \"}\r\n                <NavLink to={`/register`} className=\"white\">\r\n                  register\r\n                </NavLink>\r\n                .\r\n              </p>\r\n            </div>\r\n            <div className=\"form-side\">\r\n              <NavLink to={`/`} className=\"white\">\r\n                <span className=\"logo-single\" />\r\n              </NavLink>\r\n              <CardTitle className=\"mb-4\">\r\n                <IntlMessages id=\"user.forgot-password\" />\r\n              </CardTitle>\r\n\r\n              <Formik\r\n                initialValues={initialValues}\r\n                onSubmit={this.onForgotPassword}>\r\n                {({ errors, touched }) => (\r\n                  <Form className=\"av-tooltip tooltip-label-bottom\">\r\n                    <FormGroup className=\"form-group has-float-label\">\r\n                      <Label>\r\n                        <IntlMessages id=\"user.email\" />\r\n                      </Label>\r\n                      <Field\r\n                        className=\"form-control\"\r\n                        name=\"email\"\r\n                        validate={this.validateEmail}\r\n                      />\r\n                      {errors.email && touched.email && (\r\n                        <div className=\"invalid-feedback d-block\">\r\n                          {errors.email}\r\n                        </div>\r\n                      )}\r\n                    </FormGroup>\r\n\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                      <NavLink to={`/user/forgot-password`}>\r\n                        <IntlMessages id=\"user.forgot-password-question\" />\r\n                      </NavLink>\r\n                      <Button\r\n                        color=\"primary\"\r\n                        className={`btn-shadow btn-multiple-state ${this.props.loading ? \"show-spinner\" : \"\"}`}\r\n                        size=\"lg\"\r\n                      >\r\n                        <span className=\"spinner d-inline-block\">\r\n                          <span className=\"bounce1\" />\r\n                          <span className=\"bounce2\" />\r\n                          <span className=\"bounce3\" />\r\n                        </span>\r\n                        <span className=\"label\"><IntlMessages id=\"user.reset-password-button\" /></span>\r\n                      </Button>\r\n                    </div>\r\n                  </Form>\r\n                )}\r\n              </Formik>\r\n            </div>\r\n          </Card>\r\n        </Colxx>\r\n      </Row>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ authUser }) => {\r\n  const { forgotUserMail, loading, error } = authUser;\r\n  return { forgotUserMail, loading, error };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    forgotPassword\r\n  }\r\n)(ForgotPassword);\r\n\r\n"]},"metadata":{},"sourceType":"module"}