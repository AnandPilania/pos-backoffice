{"ast":null,"code":"import _toConsumableArray from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from\"react\";import{Button,Modal,ModalBody,ModalFooter,ModalHeader,Row}from\"reactstrap\";import Pagination from\"../../../containers/products/Pagination\";import{getCategoryList,changeCategoriesState,deleteCategories}from\"../../../redux/actions\";import ListPageHeading from\"../../../containers/products/ListPageHeading\";import AddNewModal from\"../../../containers/categories/AddNewModal\";import DataListView from\"../../../containers/categories/CategoryListView\";import{connect}from\"react-redux\";function collect(props){return{data:props.data};}var CategoryListPages=/*#__PURE__*/function(_Component){_inherits(CategoryListPages,_Component);var _super=_createSuper(CategoryListPages);function CategoryListPages(props){var _this;_classCallCheck(this,CategoryListPages);_this=_super.call(this,props);_this.toggleModal=function(){_this.setState({modalOpen:!_this.state.modalOpen});};_this.toggleDeleteConfirmModal=function(){_this.setState({confirmModalOpen:!_this.state.confirmModalOpen});};_this.changeOrderBy=function(column){_this.setState({selectedOrderOption:_this.state.orderOptions.find(function(x){return x.column===column;})},function(){return _this.dataListRender();});};_this.changePageSize=function(size){_this.setState({selectedPageSize:size,currentPage:1},function(){return _this.dataListRender();});};_this.onChangePage=function(page){_this.setState({currentPage:page},function(){return _this.dataListRender();});};_this.onSearchKey=function(e){if(e.key===\"Enter\"){_this.setState({search:e.target.value.toLowerCase()},function(){return _this.dataListRender();});}};_this.onCheckItem=function(event,id){if(event.target.tagName===\"A\"||event.target.parentElement&&event.target.parentElement.tagName===\"A\"){return true;}if(_this.state.lastChecked===null){_this.setState({lastChecked:id});}var selectedItems=_this.state.selectedItems;if(selectedItems.includes(id)){selectedItems=selectedItems.filter(function(x){return x!==id;});}else{selectedItems.push(id);}_this.setState({selectedItems});if(event.shiftKey){var _selectedItems;var items=_this.state.items;var start=_this.getIndex(id,items,\"id\");var end=_this.getIndex(_this.state.lastChecked,items,\"id\");items=items.slice(Math.min(start,end),Math.max(start,end)+1);(_selectedItems=selectedItems).push.apply(_selectedItems,_toConsumableArray(items.map(function(item){return item.id;})));selectedItems=Array.from(new Set(selectedItems));_this.setState({selectedItems});}document.activeElement.blur();};_this.handleChangeSelectAll=function(isToggle){if(_this.state.selectedItems.length>=_this.props.items.length){if(isToggle){_this.setState({selectedItems:[]});}}else{_this.setState({selectedItems:_this.props.items.map(function(x){return x.id;})});}document.activeElement.blur();return false;};_this.handleEditAction=function(){if(_this.state.selectedItems.length===1)_this.props.history.push(_this.props.match.url+'/edit/'+_this.state.selectedItems[0]);};_this.handleActivate=function(){if(_this.state.selectedItems.length>0)_this.props.changeCategoriesState(_this.state.selectedItems,1);};_this.handleInactivate=function(){if(_this.state.selectedItems.length>0)_this.props.changeCategoriesState(_this.state.selectedItems,0);};_this.handleDelete=function(){_this.toggleDeleteConfirmModal();};_this.handleDeleteSelectedCategory=function(categoryId){_this.setState({isLoading:false});_this.props.deleteCategories([categoryId]).then(function(res){return res?_this.dataListRender():{};});};_this.deleteCategory=function(){_this.toggleDeleteConfirmModal();_this.setState({isLoading:false});_this.props.deleteCategories(_this.state.selectedItems).then(function(res){return res?_this.dataListRender():{};});};_this.mouseTrap=require('mousetrap');_this.state={displayMode:\"list\",selectedPageSize:8,orderOptions:[{column:\"\",label:\"Default\"},{column:\"name\",label:\"Name\"},{column:\"status\",label:\"Status\"}],pageSizes:[8,12,24],selectedOrderOption:{column:\"\",label:\"Default\"},dropdownSplitOpen:false,modalOpen:false,currentPage:1,totalItemCount:0,totalPage:1,search:\"\",selectedItems:[],lastChecked:null,isLoading:false,confirmModalOpen:false};return _this;}_createClass(CategoryListPages,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.dataListRender();this.mouseTrap.bind([\"ctrl+a\",\"command+a\"],function(){return _this2.handleChangeSelectAll(false);});this.mouseTrap.bind([\"ctrl+d\",\"command+d\"],function(){_this2.setState({selectedItems:[]});return false;});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.mouseTrap.unbind(\"ctrl+a\");this.mouseTrap.unbind(\"command+a\");this.mouseTrap.unbind(\"ctrl+d\");this.mouseTrap.unbind(\"command+d\");}},{key:\"getIndex\",value:function getIndex(value,arr,prop){for(var i=0;i<arr.length;i++){if(arr[i][prop]===value){return i;}}return-1;}},{key:\"dataListRender\",value:function dataListRender(){var _this3=this;var _this$state=this.state,selectedPageSize=_this$state.selectedPageSize,currentPage=_this$state.currentPage,selectedOrderOption=_this$state.selectedOrderOption,search=_this$state.search;this.setState({isLoading:false});this.props.getCategoryList({selectedPageSize,currentPage,selectedOrderOption,search}).then(function(res){_this3.setState({selectedItems:[],isLoading:true});});}},{key:\"render\",value:function render(){var _this4=this;var _this$state2=this.state,currentPage=_this$state2.currentPage,selectedPageSize=_this$state2.selectedPageSize,selectedOrderOption=_this$state2.selectedOrderOption,selectedItems=_this$state2.selectedItems,orderOptions=_this$state2.orderOptions,pageSizes=_this$state2.pageSizes,modalOpen=_this$state2.modalOpen,confirmModalOpen=_this$state2.confirmModalOpen;var _this$props=this.props,items=_this$props.items,totalItemCount=_this$props.totalItem,totalPage=_this$props.totalPage,match=_this$props.match;var startIndex=(currentPage-1)*selectedPageSize;var endIndex=currentPage*selectedPageSize;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"disable-text-selection\"},/*#__PURE__*/React.createElement(ListPageHeading,{heading:\"menu.categories\",handleChangeSelectAll:this.handleChangeSelectAll,changeOrderBy:this.changeOrderBy,changePageSize:this.changePageSize,selectedPageSize:selectedPageSize,totalItemCount:totalItemCount,selectedOrderOption:selectedOrderOption,match:match,startIndex:startIndex,endIndex:endIndex,selectedItems:selectedItems,itemsLength:items?items.length:0,onSearchKey:this.onSearchKey,orderOptions:orderOptions,pageSizes:pageSizes,toggleModal:this.toggleModal,handleEditAction:this.handleEditAction,handleActivate:this.handleActivate,handleInactivate:this.handleInactivate,handleDelete:this.handleDelete}),/*#__PURE__*/React.createElement(Modal,{isOpen:confirmModalOpen,toggle:this.toggleDeleteConfirmModal},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleDeleteConfirmModal},\"Delete Category\"),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure you want to delete selected category(s)?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:this.deleteCategory,size:\"lg\",color:\"primary\"},\"Yes\"),/*#__PURE__*/React.createElement(Button,{onClick:this.toggleDeleteConfirmModal,size:\"lg\",outline:true,color:\"secondary\"},\"Cancel\"))),/*#__PURE__*/React.createElement(AddNewModal,{modalOpen:modalOpen,dataListRender:this.dataListRender.bind(this),toggleModal:this.toggleModal}),!this.state.isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"}):/*#__PURE__*/React.createElement(Row,null,items.map(function(category){return/*#__PURE__*/React.createElement(DataListView,{key:category.id,product:category,isSelect:_this4.state.selectedItems.includes(category.id),onCheckItem:_this4.onCheckItem,collect:collect,onDelete:_this4.handleDeleteSelectedCategory});}),\" \",/*#__PURE__*/React.createElement(Pagination,{currentPage:this.state.currentPage,totalPage:totalPage,onChangePage:function onChangePage(i){return _this4.onChangePage(i);}}))));}}]);return CategoryListPages;}(Component);var mapStateToProps=function mapStateToProps(_ref){var categories=_ref.categories;var items=categories.items,totalItem=categories.totalItem,totalPage=categories.totalPage;return{items,totalItem,totalPage};};export default connect(mapStateToProps,{getCategoryList,changeCategoriesState,deleteCategories})(CategoryListPages);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/products/categories/list.js"],"names":["React","Component","Fragment","Button","Modal","ModalBody","ModalFooter","ModalHeader","Row","Pagination","getCategoryList","changeCategoriesState","deleteCategories","ListPageHeading","AddNewModal","DataListView","connect","collect","props","data","CategoryListPages","toggleModal","setState","modalOpen","state","toggleDeleteConfirmModal","confirmModalOpen","changeOrderBy","column","selectedOrderOption","orderOptions","find","x","dataListRender","changePageSize","size","selectedPageSize","currentPage","onChangePage","page","onSearchKey","e","key","search","target","value","toLowerCase","onCheckItem","event","id","tagName","parentElement","lastChecked","selectedItems","includes","filter","push","shiftKey","items","start","getIndex","end","slice","Math","min","max","map","item","Array","from","Set","document","activeElement","blur","handleChangeSelectAll","isToggle","length","handleEditAction","history","match","url","handleActivate","handleInactivate","handleDelete","handleDeleteSelectedCategory","categoryId","isLoading","then","res","deleteCategory","mouseTrap","require","displayMode","label","pageSizes","dropdownSplitOpen","totalItemCount","totalPage","bind","unbind","arr","prop","i","totalItem","startIndex","endIndex","category","mapStateToProps","categories"],"mappings":"wgCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAQC,MAAR,CAAgBC,KAAhB,CAAuBC,SAAvB,CAAkCC,WAAlC,CAA+CC,WAA/C,CAA4DC,GAA5D,KAAsE,YAAtE,CACA,MAAOC,CAAAA,UAAP,KAAuB,yCAAvB,CACA,OACIC,eADJ,CAEIC,qBAFJ,CAGIC,gBAHJ,KAIO,wBAJP,CAKA,MAAOC,CAAAA,eAAP,KAA4B,8CAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,4CAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iDAAzB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CAEA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwB,CACpB,MAAO,CAAEC,IAAI,CAAED,KAAK,CAACC,IAAd,CAAP,CACH,C,GAEKC,CAAAA,iB,sHACF,2BAAYF,KAAZ,CAAmB,mDACf,uBAAMA,KAAN,EADe,MAiDnBG,WAjDmB,CAiDL,UAAM,CAChB,MAAKC,QAAL,CAAc,CACVC,SAAS,CAAE,CAAC,MAAKC,KAAL,CAAWD,SADb,CAAd,EAGH,CArDkB,OAuDnBE,wBAvDmB,CAuDQ,UAAM,CAC7B,MAAKH,QAAL,CAAc,CACVI,gBAAgB,CAAE,CAAC,MAAKF,KAAL,CAAWE,gBADpB,CAAd,EAGH,CA3DkB,OA6DnBC,aA7DmB,CA6DH,SAAAC,MAAM,CAAI,CACtB,MAAKN,QAAL,CACI,CACIO,mBAAmB,CAAE,MAAKL,KAAL,CAAWM,YAAX,CAAwBC,IAAxB,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACJ,MAAF,GAAaA,MAAjB,EADgB,CADzB,CADJ,CAMI,iBAAM,OAAKK,cAAL,EAAN,EANJ,EAQH,CAtEkB,OAuEnBC,cAvEmB,CAuEF,SAAAC,IAAI,CAAI,CACrB,MAAKb,QAAL,CACI,CACIc,gBAAgB,CAAED,IADtB,CAEIE,WAAW,CAAE,CAFjB,CADJ,CAKI,iBAAM,OAAKJ,cAAL,EAAN,EALJ,EAOH,CA/EkB,OAiFnBK,YAjFmB,CAiFJ,SAAAC,IAAI,CAAI,CACnB,MAAKjB,QAAL,CACI,CACIe,WAAW,CAAEE,IADjB,CADJ,CAII,iBAAM,OAAKN,cAAL,EAAN,EAJJ,EAMH,CAxFkB,OA0FnBO,WA1FmB,CA0FL,SAAAC,CAAC,CAAI,CACf,GAAIA,CAAC,CAACC,GAAF,GAAU,OAAd,CAAuB,CACnB,MAAKpB,QAAL,CACI,CACIqB,MAAM,CAAEF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAeC,WAAf,EADZ,CADJ,CAII,iBAAM,OAAKb,cAAL,EAAN,EAJJ,EAMH,CACJ,CAnGkB,OAqGnBc,WArGmB,CAqGL,SAACC,KAAD,CAAQC,EAAR,CAAe,CACzB,GACID,KAAK,CAACJ,MAAN,CAAaM,OAAb,GAAyB,GAAzB,EACCF,KAAK,CAACJ,MAAN,CAAaO,aAAb,EAA8BH,KAAK,CAACJ,MAAN,CAAaO,aAAb,CAA2BD,OAA3B,GAAuC,GAF1E,CAGE,CACE,MAAO,KAAP,CACH,CACD,GAAI,MAAK1B,KAAL,CAAW4B,WAAX,GAA2B,IAA/B,CAAqC,CACjC,MAAK9B,QAAL,CAAc,CACV8B,WAAW,CAAEH,EADH,CAAd,EAGH,CAED,GAAII,CAAAA,aAAa,CAAG,MAAK7B,KAAL,CAAW6B,aAA/B,CACA,GAAIA,aAAa,CAACC,QAAd,CAAuBL,EAAvB,CAAJ,CAAgC,CAC5BI,aAAa,CAAGA,aAAa,CAACE,MAAd,CAAqB,SAAAvB,CAAC,QAAIA,CAAAA,CAAC,GAAKiB,EAAV,EAAtB,CAAhB,CACH,CAFD,IAEO,CACHI,aAAa,CAACG,IAAd,CAAmBP,EAAnB,EACH,CACD,MAAK3B,QAAL,CAAc,CACV+B,aADU,CAAd,EAIA,GAAIL,KAAK,CAACS,QAAV,CAAoB,oBAChB,GAAIC,CAAAA,KAAK,CAAG,MAAKlC,KAAL,CAAWkC,KAAvB,CACA,GAAIC,CAAAA,KAAK,CAAG,MAAKC,QAAL,CAAcX,EAAd,CAAkBS,KAAlB,CAAyB,IAAzB,CAAZ,CACA,GAAIG,CAAAA,GAAG,CAAG,MAAKD,QAAL,CAAc,MAAKpC,KAAL,CAAW4B,WAAzB,CAAsCM,KAAtC,CAA6C,IAA7C,CAAV,CACAA,KAAK,CAAGA,KAAK,CAACI,KAAN,CAAYC,IAAI,CAACC,GAAL,CAASL,KAAT,CAAgBE,GAAhB,CAAZ,CAAkCE,IAAI,CAACE,GAAL,CAASN,KAAT,CAAgBE,GAAhB,EAAuB,CAAzD,CAAR,CACA,gBAAAR,aAAa,EAACG,IAAd,yCACOE,KAAK,CAACQ,GAAN,CAAU,SAAAC,IAAI,CAAI,CACjB,MAAOA,CAAAA,IAAI,CAAClB,EAAZ,CACH,CAFE,CADP,GAKAI,aAAa,CAAGe,KAAK,CAACC,IAAN,CAAW,GAAIC,CAAAA,GAAJ,CAAQjB,aAAR,CAAX,CAAhB,CACA,MAAK/B,QAAL,CAAc,CACV+B,aADU,CAAd,EAGH,CACDkB,QAAQ,CAACC,aAAT,CAAuBC,IAAvB,GACH,CA5IkB,OAsJnBC,qBAtJmB,CAsJK,SAAAC,QAAQ,CAAI,CAChC,GAAI,MAAKnD,KAAL,CAAW6B,aAAX,CAAyBuB,MAAzB,EAAmC,MAAK1D,KAAL,CAAWwC,KAAX,CAAiBkB,MAAxD,CAAgE,CAC5D,GAAID,QAAJ,CAAc,CACV,MAAKrD,QAAL,CAAc,CACV+B,aAAa,CAAE,EADL,CAAd,EAGH,CACJ,CAND,IAMO,CACH,MAAK/B,QAAL,CAAc,CACV+B,aAAa,CAAE,MAAKnC,KAAL,CAAWwC,KAAX,CAAiBQ,GAAjB,CAAqB,SAAAlC,CAAC,QAAIA,CAAAA,CAAC,CAACiB,EAAN,EAAtB,CADL,CAAd,EAGH,CACDsB,QAAQ,CAACC,aAAT,CAAuBC,IAAvB,GACA,MAAO,MAAP,CACH,CApKkB,OAgMnBI,gBAhMmB,CAgMA,UAAM,CACrB,GAAI,MAAKrD,KAAL,CAAW6B,aAAX,CAAyBuB,MAAzB,GAAoC,CAAxC,CACI,MAAK1D,KAAL,CAAW4D,OAAX,CAAmBtB,IAAnB,CAAwB,MAAKtC,KAAL,CAAW6D,KAAX,CAAiBC,GAAjB,CAAuB,QAAvB,CAAkC,MAAKxD,KAAL,CAAW6B,aAAX,CAAyB,CAAzB,CAA1D,EACP,CAnMkB,OAqMnB4B,cArMmB,CAqMF,UAAM,CACnB,GAAI,MAAKzD,KAAL,CAAW6B,aAAX,CAAyBuB,MAAzB,CAAkC,CAAtC,CACI,MAAK1D,KAAL,CAAWP,qBAAX,CAAiC,MAAKa,KAAL,CAAW6B,aAA5C,CAA2D,CAA3D,EACP,CAxMkB,OA0MnB6B,gBA1MmB,CA0MA,UAAM,CACrB,GAAI,MAAK1D,KAAL,CAAW6B,aAAX,CAAyBuB,MAAzB,CAAkC,CAAtC,CACI,MAAK1D,KAAL,CAAWP,qBAAX,CAAiC,MAAKa,KAAL,CAAW6B,aAA5C,CAA2D,CAA3D,EACP,CA7MkB,OA+MnB8B,YA/MmB,CA+MJ,UAAM,CACjB,MAAK1D,wBAAL,GACH,CAjNkB,OAmNnB2D,4BAnNmB,CAmNY,SAACC,UAAD,CAAgB,CAC3C,MAAK/D,QAAL,CAAc,CACVgE,SAAS,CAAE,KADD,CAAd,EAGA,MAAKpE,KAAL,CAAWN,gBAAX,CAA4B,CAACyE,UAAD,CAA5B,EACKE,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAAG,MAAKvD,cAAL,EAAH,CAA2B,EAAlC,EADb,EAEH,CAzNkB,OA2NnBwD,cA3NmB,CA2NF,UAAM,CACnB,MAAKhE,wBAAL,GACA,MAAKH,QAAL,CAAc,CACVgE,SAAS,CAAE,KADD,CAAd,EAGA,MAAKpE,KAAL,CAAWN,gBAAX,CAA4B,MAAKY,KAAL,CAAW6B,aAAvC,EACKkC,IADL,CACU,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAAG,MAAKvD,cAAL,EAAH,CAA2B,EAAlC,EADb,EAEH,CAlOkB,CAEf,MAAKyD,SAAL,CAAiBC,OAAO,CAAC,WAAD,CAAxB,CACA,MAAKnE,KAAL,CAAa,CACToE,WAAW,CAAE,MADJ,CAGTxD,gBAAgB,CAAE,CAHT,CAITN,YAAY,CAAE,CACV,CAAEF,MAAM,CAAE,EAAV,CAAciE,KAAK,CAAE,SAArB,CADU,CAEV,CAAEjE,MAAM,CAAE,MAAV,CAAkBiE,KAAK,CAAE,MAAzB,CAFU,CAGV,CAAEjE,MAAM,CAAE,QAAV,CAAoBiE,KAAK,CAAE,QAA3B,CAHU,CAJL,CASTC,SAAS,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAQ,EAAR,CATF,CAWTjE,mBAAmB,CAAE,CAAED,MAAM,CAAE,EAAV,CAAciE,KAAK,CAAE,SAArB,CAXZ,CAYTE,iBAAiB,CAAE,KAZV,CAaTxE,SAAS,CAAE,KAbF,CAcTc,WAAW,CAAE,CAdJ,CAeT2D,cAAc,CAAE,CAfP,CAgBTC,SAAS,CAAE,CAhBF,CAiBTtD,MAAM,CAAE,EAjBC,CAkBTU,aAAa,CAAE,EAlBN,CAmBTD,WAAW,CAAE,IAnBJ,CAoBTkC,SAAS,CAAE,KApBF,CAsBT5D,gBAAgB,CAAE,KAtBT,CAAb,CAHe,aA2BlB,C,2FAEmB,iBAChB,KAAKO,cAAL,GACA,KAAKyD,SAAL,CAAeQ,IAAf,CAAoB,CAAC,QAAD,CAAW,WAAX,CAApB,CAA6C,iBACzC,CAAA,MAAI,CAACxB,qBAAL,CAA2B,KAA3B,CADyC,EAA7C,EAGA,KAAKgB,SAAL,CAAeQ,IAAf,CAAoB,CAAC,QAAD,CAAW,WAAX,CAApB,CAA6C,UAAM,CAC/C,MAAI,CAAC5E,QAAL,CAAc,CACV+B,aAAa,CAAE,EADL,CAAd,EAGA,MAAO,MAAP,CACH,CALD,EAMH,C,mEAEsB,CACnB,KAAKqC,SAAL,CAAeS,MAAf,CAAsB,QAAtB,EACA,KAAKT,SAAL,CAAeS,MAAf,CAAsB,WAAtB,EACA,KAAKT,SAAL,CAAeS,MAAf,CAAsB,QAAtB,EACA,KAAKT,SAAL,CAAeS,MAAf,CAAsB,WAAtB,EACH,C,0CA+FQtD,K,CAAOuD,G,CAAKC,I,CAAM,CACvB,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,GAAG,CAACxB,MAAxB,CAAgC0B,CAAC,EAAjC,CAAqC,CACjC,GAAIF,GAAG,CAACE,CAAD,CAAH,CAAOD,IAAP,IAAiBxD,KAArB,CAA4B,CACxB,MAAOyD,CAAAA,CAAP,CACH,CACJ,CACD,MAAO,CAAC,CAAR,CACH,C,uDAkBgB,iCAMT,KAAK9E,KANI,CAETY,gBAFS,aAETA,gBAFS,CAGTC,WAHS,aAGTA,WAHS,CAITR,mBAJS,aAITA,mBAJS,CAKTc,MALS,aAKTA,MALS,CAQb,KAAKrB,QAAL,CAAc,CACVgE,SAAS,CAAE,KADD,CAAd,EAIA,KAAKpE,KAAL,CAAWR,eAAX,CAA2B,CACvB0B,gBADuB,CAEvBC,WAFuB,CAGvBR,mBAHuB,CAIvBc,MAJuB,CAA3B,EAKG4C,IALH,CAKQ,SAAAC,GAAG,CAAI,CACX,MAAI,CAAClE,QAAL,CAAc,CACV+B,aAAa,CAAE,EADL,CAEViC,SAAS,CAAE,IAFD,CAAd,EAIH,CAVD,EAWH,C,uCAqCQ,kCAUD,KAAK9D,KAVJ,CAEDa,WAFC,cAEDA,WAFC,CAGDD,gBAHC,cAGDA,gBAHC,CAIDP,mBAJC,cAIDA,mBAJC,CAKDwB,aALC,cAKDA,aALC,CAMDvB,YANC,cAMDA,YANC,CAODgE,SAPC,cAODA,SAPC,CAQDvE,SARC,cAQDA,SARC,CASDG,gBATC,cASDA,gBATC,iBAeS,KAAKR,KAfd,CAYDwC,KAZC,aAYDA,KAZC,CAaUsC,cAbV,aAaDO,SAbC,CAcDN,SAdC,aAcDA,SAdC,CAeDlB,KAfC,aAeDA,KAfC,CAgBL,GAAMyB,CAAAA,UAAU,CAAG,CAACnE,WAAW,CAAG,CAAf,EAAoBD,gBAAvC,CACA,GAAMqE,CAAAA,QAAQ,CAAGpE,WAAW,CAAGD,gBAA/B,CAEA,mBACI,oBAAC,QAAD,mBACI,2BAAK,SAAS,CAAC,wBAAf,eACI,oBAAC,eAAD,EACI,OAAO,CAAC,iBADZ,CAEI,qBAAqB,CAAE,KAAKsC,qBAFhC,CAGI,aAAa,CAAE,KAAK/C,aAHxB,CAII,cAAc,CAAE,KAAKO,cAJzB,CAKI,gBAAgB,CAAEE,gBALtB,CAMI,cAAc,CAAE4D,cANpB,CAOI,mBAAmB,CAAEnE,mBAPzB,CAQI,KAAK,CAAEkD,KARX,CASI,UAAU,CAAEyB,UAThB,CAUI,QAAQ,CAAEC,QAVd,CAWI,aAAa,CAAEpD,aAXnB,CAYI,WAAW,CAAEK,KAAK,CAAGA,KAAK,CAACkB,MAAT,CAAkB,CAZxC,CAaI,WAAW,CAAE,KAAKpC,WAbtB,CAcI,YAAY,CAAEV,YAdlB,CAeI,SAAS,CAAEgE,SAff,CAgBI,WAAW,CAAE,KAAKzE,WAhBtB,CAiBI,gBAAgB,CAAE,KAAKwD,gBAjB3B,CAkBI,cAAc,CAAE,KAAKI,cAlBzB,CAmBI,gBAAgB,CAAE,KAAKC,gBAnB3B,CAoBI,YAAY,CAAE,KAAKC,YApBvB,EADJ,cAuBI,oBAAC,KAAD,EAAO,MAAM,CAAEzD,gBAAf,CAAiC,MAAM,CAAE,KAAKD,wBAA9C,eACI,oBAAC,WAAD,EAAa,MAAM,CAAE,KAAKA,wBAA1B,oBADJ,cAEI,oBAAC,SAAD,8DAFJ,cAKI,oBAAC,WAAD,mBACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKgE,cAAtB,CAAsC,IAAI,CAAC,IAA3C,CAAgD,KAAK,CAAC,SAAtD,QADJ,cAEI,oBAAC,MAAD,EAAQ,OAAO,CAAE,KAAKhE,wBAAtB,CAAgD,IAAI,CAAC,IAArD,CAA0D,OAAO,KAAjE,CAAkE,KAAK,CAAC,WAAxE,WAFJ,CALJ,CAvBJ,cAiCI,oBAAC,WAAD,EACI,SAAS,CAAEF,SADf,CAEI,cAAc,CAAE,KAAKU,cAAL,CAAoBiE,IAApB,CAAyB,IAAzB,CAFpB,CAGI,WAAW,CAAE,KAAK7E,WAHtB,EAjCJ,CAuCQ,CAAC,KAAKG,KAAL,CAAW8D,SAAZ,cACI,2BAAK,SAAS,CAAC,SAAf,EADJ,cAGA,oBAAC,GAAD,MACK5B,KAAK,CAACQ,GAAN,CAAU,SAAAwC,QAAQ,CAAI,CAEnB,mBACI,oBAAC,YAAD,EACI,GAAG,CAAEA,QAAQ,CAACzD,EADlB,CAEI,OAAO,CAAEyD,QAFb,CAGI,QAAQ,CAAE,MAAI,CAAClF,KAAL,CAAW6B,aAAX,CAAyBC,QAAzB,CAAkCoD,QAAQ,CAACzD,EAA3C,CAHd,CAII,WAAW,CAAE,MAAI,CAACF,WAJtB,CAKI,OAAO,CAAE9B,OALb,CAMI,QAAQ,CAAE,MAAI,CAACmE,4BANnB,EADJ,CAWH,CAbA,CADL,CAcQ,GAdR,cAeI,oBAAC,UAAD,EACI,WAAW,CAAE,KAAK5D,KAAL,CAAWa,WAD5B,CAEI,SAAS,CAAE4D,SAFf,CAGI,YAAY,CAAE,sBAAAK,CAAC,QAAI,CAAA,MAAI,CAAChE,YAAL,CAAkBgE,CAAlB,CAAJ,EAHnB,EAfJ,CA1CR,CADJ,CADJ,CAqEH,C,+BA5T2BrG,S,EA+ThC,GAAM0G,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,MAAoB,IAAjBC,CAAAA,UAAiB,MAAjBA,UAAiB,IAChClD,CAAAA,KADgC,CACAkD,UADA,CAChClD,KADgC,CACzB6C,SADyB,CACAK,UADA,CACzBL,SADyB,CACdN,SADc,CACAW,UADA,CACdX,SADc,CAExC,MAAO,CAAEvC,KAAF,CAAS6C,SAAT,CAAoBN,SAApB,CAAP,CACH,CAHD,CAKA,cAAejF,CAAAA,OAAO,CAClB2F,eADkB,CAElB,CACIjG,eADJ,CAEIC,qBAFJ,CAGIC,gBAHJ,CAFkB,CAAP,CAObQ,iBAPa,CAAf","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport {Button, Modal, ModalBody, ModalFooter, ModalHeader, Row} from \"reactstrap\";\r\nimport Pagination from \"../../../containers/products/Pagination\";\r\nimport {\r\n    getCategoryList,\r\n    changeCategoriesState,\r\n    deleteCategories\r\n} from \"../../../redux/actions\";\r\nimport ListPageHeading from \"../../../containers/products/ListPageHeading\";\r\nimport AddNewModal from \"../../../containers/categories/AddNewModal\";\r\nimport DataListView from \"../../../containers/categories/CategoryListView\";\r\nimport {connect} from \"react-redux\";\r\n\r\nfunction collect(props) {\r\n    return { data: props.data };\r\n}\r\n\r\nclass CategoryListPages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.mouseTrap = require('mousetrap');\r\n        this.state = {\r\n            displayMode: \"list\",\r\n\r\n            selectedPageSize: 8,\r\n            orderOptions: [\r\n                { column: \"\", label: \"Default\" },\r\n                { column: \"name\", label: \"Name\" },\r\n                { column: \"status\", label: \"Status\" }\r\n            ],\r\n            pageSizes: [8, 12, 24],\r\n\r\n            selectedOrderOption: { column: \"\", label: \"Default\" },\r\n            dropdownSplitOpen: false,\r\n            modalOpen: false,\r\n            currentPage: 1,\r\n            totalItemCount: 0,\r\n            totalPage: 1,\r\n            search: \"\",\r\n            selectedItems: [],\r\n            lastChecked: null,\r\n            isLoading: false,\r\n\r\n            confirmModalOpen: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.dataListRender();\r\n        this.mouseTrap.bind([\"ctrl+a\", \"command+a\"], () =>\r\n            this.handleChangeSelectAll(false)\r\n        );\r\n        this.mouseTrap.bind([\"ctrl+d\", \"command+d\"], () => {\r\n            this.setState({\r\n                selectedItems: []\r\n            });\r\n            return false;\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.mouseTrap.unbind(\"ctrl+a\");\r\n        this.mouseTrap.unbind(\"command+a\");\r\n        this.mouseTrap.unbind(\"ctrl+d\");\r\n        this.mouseTrap.unbind(\"command+d\");\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modalOpen: !this.state.modalOpen\r\n        });\r\n    };\r\n\r\n    toggleDeleteConfirmModal = () => {\r\n        this.setState({\r\n            confirmModalOpen: !this.state.confirmModalOpen\r\n        });\r\n    };\r\n\r\n    changeOrderBy = column => {\r\n        this.setState(\r\n            {\r\n                selectedOrderOption: this.state.orderOptions.find(\r\n                    x => x.column === column\r\n                )\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n    changePageSize = size => {\r\n        this.setState(\r\n            {\r\n                selectedPageSize: size,\r\n                currentPage: 1\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n\r\n    onChangePage = page => {\r\n        this.setState(\r\n            {\r\n                currentPage: page\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n\r\n    onSearchKey = e => {\r\n        if (e.key === \"Enter\") {\r\n            this.setState(\r\n                {\r\n                    search: e.target.value.toLowerCase()\r\n                },\r\n                () => this.dataListRender()\r\n            );\r\n        }\r\n    };\r\n\r\n    onCheckItem = (event, id) => {\r\n        if (\r\n            event.target.tagName === \"A\" ||\r\n            (event.target.parentElement && event.target.parentElement.tagName === \"A\")\r\n        ) {\r\n            return true;\r\n        }\r\n        if (this.state.lastChecked === null) {\r\n            this.setState({\r\n                lastChecked: id\r\n            });\r\n        }\r\n\r\n        let selectedItems = this.state.selectedItems;\r\n        if (selectedItems.includes(id)) {\r\n            selectedItems = selectedItems.filter(x => x !== id);\r\n        } else {\r\n            selectedItems.push(id);\r\n        }\r\n        this.setState({\r\n            selectedItems\r\n        });\r\n\r\n        if (event.shiftKey) {\r\n            var items = this.state.items;\r\n            var start = this.getIndex(id, items, \"id\");\r\n            var end = this.getIndex(this.state.lastChecked, items, \"id\");\r\n            items = items.slice(Math.min(start, end), Math.max(start, end) + 1);\r\n            selectedItems.push(\r\n                ...items.map(item => {\r\n                    return item.id;\r\n                })\r\n            );\r\n            selectedItems = Array.from(new Set(selectedItems));\r\n            this.setState({\r\n                selectedItems\r\n            });\r\n        }\r\n        document.activeElement.blur();\r\n    };\r\n\r\n    getIndex(value, arr, prop) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i][prop] === value) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    handleChangeSelectAll = isToggle => {\r\n        if (this.state.selectedItems.length >= this.props.items.length) {\r\n            if (isToggle) {\r\n                this.setState({\r\n                    selectedItems: []\r\n                });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                selectedItems: this.props.items.map(x => x.id)\r\n            });\r\n        }\r\n        document.activeElement.blur();\r\n        return false;\r\n    };\r\n\r\n\r\n    dataListRender() {\r\n        const {\r\n            selectedPageSize,\r\n            currentPage,\r\n            selectedOrderOption,\r\n            search\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n\r\n        this.props.getCategoryList({\r\n            selectedPageSize,\r\n            currentPage,\r\n            selectedOrderOption,\r\n            search\r\n        }).then(res => {\r\n            this.setState({\r\n                selectedItems: [],\r\n                isLoading: true\r\n            });\r\n        });\r\n    }\r\n\r\n    handleEditAction = () => {\r\n        if (this.state.selectedItems.length === 1)\r\n            this.props.history.push(this.props.match.url + '/edit/' + this.state.selectedItems[0]);\r\n    }\r\n\r\n    handleActivate = () => {\r\n        if (this.state.selectedItems.length > 0)\r\n            this.props.changeCategoriesState(this.state.selectedItems, 1);\r\n    }\r\n\r\n    handleInactivate = () => {\r\n        if (this.state.selectedItems.length > 0)\r\n            this.props.changeCategoriesState(this.state.selectedItems, 0);\r\n    }\r\n\r\n    handleDelete = () => {\r\n        this.toggleDeleteConfirmModal();\r\n    }\r\n\r\n    handleDeleteSelectedCategory = (categoryId) => {\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n        this.props.deleteCategories([categoryId])\r\n            .then(res => res ? this.dataListRender() : {});\r\n    }\r\n\r\n    deleteCategory = () => {\r\n        this.toggleDeleteConfirmModal();\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n        this.props.deleteCategories(this.state.selectedItems)\r\n            .then(res => res ? this.dataListRender() : {});\r\n    }\r\n    render() {\r\n        const {\r\n            currentPage,\r\n            selectedPageSize,\r\n            selectedOrderOption,\r\n            selectedItems,\r\n            orderOptions,\r\n            pageSizes,\r\n            modalOpen,\r\n            confirmModalOpen\r\n        } = this.state;\r\n        const {\r\n            items,\r\n            totalItem: totalItemCount,\r\n            totalPage,\r\n            match } = this.props;\r\n        const startIndex = (currentPage - 1) * selectedPageSize;\r\n        const endIndex = currentPage * selectedPageSize;\r\n\r\n        return (\r\n            <Fragment>\r\n                <div className=\"disable-text-selection\">\r\n                    <ListPageHeading\r\n                        heading=\"menu.categories\"\r\n                        handleChangeSelectAll={this.handleChangeSelectAll}\r\n                        changeOrderBy={this.changeOrderBy}\r\n                        changePageSize={this.changePageSize}\r\n                        selectedPageSize={selectedPageSize}\r\n                        totalItemCount={totalItemCount}\r\n                        selectedOrderOption={selectedOrderOption}\r\n                        match={match}\r\n                        startIndex={startIndex}\r\n                        endIndex={endIndex}\r\n                        selectedItems={selectedItems}\r\n                        itemsLength={items ? items.length : 0}\r\n                        onSearchKey={this.onSearchKey}\r\n                        orderOptions={orderOptions}\r\n                        pageSizes={pageSizes}\r\n                        toggleModal={this.toggleModal}\r\n                        handleEditAction={this.handleEditAction}\r\n                        handleActivate={this.handleActivate}\r\n                        handleInactivate={this.handleInactivate}\r\n                        handleDelete={this.handleDelete}\r\n                    />\r\n                    <Modal isOpen={confirmModalOpen} toggle={this.toggleDeleteConfirmModal}>\r\n                        <ModalHeader toggle={this.toggleDeleteConfirmModal}>Delete Category</ModalHeader>\r\n                        <ModalBody>\r\n                            Are you sure you want to delete selected category(s)?\r\n                        </ModalBody>\r\n                        <ModalFooter>\r\n                            <Button onClick={this.deleteCategory} size=\"lg\" color=\"primary\">Yes</Button>\r\n                            <Button onClick={this.toggleDeleteConfirmModal} size=\"lg\" outline color=\"secondary\">Cancel</Button>\r\n                        </ModalFooter>\r\n                    </Modal>\r\n                    <AddNewModal\r\n                        modalOpen={modalOpen}\r\n                        dataListRender={this.dataListRender.bind(this)}\r\n                        toggleModal={this.toggleModal}\r\n                    />\r\n                    {\r\n                        !this.state.isLoading ? (\r\n                            <div className=\"loading\"/>\r\n                        ) :\r\n                        <Row>\r\n                            {items.map(category => {\r\n\r\n                                return (\r\n                                    <DataListView\r\n                                        key={category.id}\r\n                                        product={category}\r\n                                        isSelect={this.state.selectedItems.includes(category.id)}\r\n                                        onCheckItem={this.onCheckItem}\r\n                                        collect={collect}\r\n                                        onDelete={this.handleDeleteSelectedCategory}\r\n                                    />\r\n                                );\r\n\r\n                            })}{\" \"}\r\n                            <Pagination\r\n                                currentPage={this.state.currentPage}\r\n                                totalPage={totalPage}\r\n                                onChangePage={i => this.onChangePage(i)}\r\n                            />\r\n                        </Row>\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ categories }) => {\r\n    const { items, totalItem, totalPage } = categories;\r\n    return { items, totalItem, totalPage };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        getCategoryList,\r\n        changeCategoriesState,\r\n        deleteCategories\r\n    }\r\n)(CategoryListPages);\r\n\r\n"]},"metadata":{},"sourceType":"module"}