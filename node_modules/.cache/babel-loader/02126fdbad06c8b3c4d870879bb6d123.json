{"ast":null,"code":"import _toConsumableArray from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/products/products/list.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\nimport axios from \"axios\";\nimport { servicePath, tokenPrefix } from \"../../../constants/defaultValues\";\nimport { getProduct, changeProductsState, deleteProducts } from \"../../../redux/actions\";\nimport Pagination from \"../../../containers/products/Pagination\";\nimport ContextMenuContainer from \"../../../containers/products/ContextMenuContainer\";\nimport ListPageHeading from \"../../../containers/products/ListPageHeading\";\nimport ThumbListView from \"../../../containers/products/ThumbListView\";\nimport AddNewModal from \"../../../containers/products/AddNewModal\";\nimport ImageListView from \"../../../containers/products/ImageListView\";\nimport DataListView from \"../../../containers/products/DataListView\";\nimport { connect } from \"react-redux\";\n\nfunction collect(props) {\n  return {\n    data: props.data\n  };\n}\n\nvar ProductListPages = /*#__PURE__*/function (_Component) {\n  _inherits(ProductListPages, _Component);\n\n  var _super = _createSuper(ProductListPages);\n\n  function ProductListPages(props) {\n    var _this;\n\n    _classCallCheck(this, ProductListPages);\n\n    _this = _super.call(this, props);\n\n    _this.toggleModal = function () {\n      _this.setState({\n        modalOpen: !_this.state.modalOpen\n      });\n    };\n\n    _this.toggleDeleteConfirmModal = function () {\n      _this.setState({\n        confirmModalOpen: !_this.state.confirmModalOpen\n      });\n    };\n\n    _this.changeOrderBy = function (column) {\n      _this.setState({\n        selectedOrderOption: _this.state.orderOptions.find(function (x) {\n          return x.column === column;\n        })\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.changePageSize = function (size) {\n      _this.setState({\n        selectedPageSize: size,\n        currentPage: 1\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.changeDisplayMode = function (mode) {\n      _this.setState({\n        displayMode: mode\n      });\n\n      return false;\n    };\n\n    _this.onChangePage = function (page) {\n      _this.setState({\n        currentPage: page\n      }, function () {\n        return _this.dataListRender();\n      });\n    };\n\n    _this.onSearchKey = function (e) {\n      if (e.key === \"Enter\") {\n        _this.setState({\n          search: e.target.value.toLowerCase()\n        }, function () {\n          return _this.dataListRender();\n        });\n      }\n    };\n\n    _this.onCheckItem = function (event, id) {\n      if (event.target.tagName === \"A\" || event.target.parentElement && event.target.parentElement.tagName === \"A\") {\n        return true;\n      }\n\n      if (_this.state.lastChecked === null) {\n        _this.setState({\n          lastChecked: id\n        });\n      }\n\n      var selectedItems = _this.state.selectedItems;\n\n      if (selectedItems.includes(id)) {\n        selectedItems = selectedItems.filter(function (x) {\n          return x !== id;\n        });\n      } else {\n        selectedItems.push(id);\n      }\n\n      _this.setState({\n        selectedItems\n      });\n\n      if (event.shiftKey) {\n        var _selectedItems;\n\n        var items = _this.props.items;\n\n        var start = _this.getIndex(id, items, \"id\");\n\n        var end = _this.getIndex(_this.state.lastChecked, items, \"id\");\n\n        items = items.slice(Math.min(start, end), Math.max(start, end) + 1);\n\n        (_selectedItems = selectedItems).push.apply(_selectedItems, _toConsumableArray(items.map(function (item) {\n          return item.id;\n        })));\n\n        selectedItems = Array.from(new Set(selectedItems));\n\n        _this.setState({\n          selectedItems\n        });\n      }\n\n      document.activeElement.blur();\n    };\n\n    _this.handleChangeSelectAll = function (isToggle) {\n      if (_this.state.selectedItems.length >= _this.props.items.length) {\n        if (isToggle) {\n          _this.setState({\n            selectedItems: []\n          });\n        }\n      } else {\n        _this.setState({\n          selectedItems: _this.props.items.map(function (x) {\n            return x.id;\n          })\n        });\n      }\n\n      document.activeElement.blur();\n      return false;\n    };\n\n    _this.getCategoryList = function () {\n      axios.get(\"\".concat(servicePath, \"/categories/all\"), {\n        headers: {\n          'X-API-TOKEN': tokenPrefix + _this.props.apiToken\n        }\n      }).then(function (res) {\n        return res.data['data'];\n      }).then(function (data) {\n        _this.setState({\n          categories: data['category_list']\n        });\n      });\n    };\n\n    _this.handleEditAction = function () {\n      if (_this.state.selectedItems.length === 1) _this.props.history.push(_this.props.match.url + '/edit/' + _this.state.selectedItems[0]);\n    };\n\n    _this.handleActivate = function () {\n      if (_this.state.selectedItems.length > 0) _this.props.changeProductsState(_this.state.selectedItems, 1);\n    };\n\n    _this.handleInactivate = function () {\n      if (_this.state.selectedItems.length > 0) _this.props.changeProductsState(_this.state.selectedItems, 0);\n    };\n\n    _this.handleDelete = function () {\n      _this.toggleDeleteConfirmModal();\n    };\n\n    _this.handleDeleteSelectedProduct = function (productId) {\n      _this.setState({\n        isLoading: false\n      });\n\n      _this.props.deleteProducts([productId]).then(function (res) {\n        return res ? _this.dataListRender() : {};\n      });\n    };\n\n    _this.deleteProduct = function () {\n      _this.toggleDeleteConfirmModal();\n\n      _this.setState({\n        isLoading: false\n      });\n\n      _this.props.deleteProducts(_this.state.selectedItems).then(function (res) {\n        return res ? _this.dataListRender() : {};\n      });\n    };\n\n    _this.onContextMenu = function (e, data) {\n      var clickedProductId = data.data;\n\n      if (!_this.state.selectedItems.includes(clickedProductId)) {\n        _this.setState({\n          selectedItems: [clickedProductId]\n        });\n      }\n\n      return true;\n    };\n\n    _this.mouseTrap = require('mousetrap');\n    _this.state = {\n      displayMode: \"thumblist\",\n      selectedPageSize: 8,\n      orderOptions: [{\n        column: \"\",\n        label: \"Default\"\n      }, {\n        column: \"name\",\n        label: \"Product Name\"\n      }, {\n        column: \"category\",\n        label: \"Category\"\n      }, {\n        column: \"status\",\n        label: \"Status\"\n      }],\n      pageSizes: [8, 12, 24],\n      categories: [],\n      selectedOrderOption: {\n        column: \"\",\n        label: \"Default\"\n      },\n      dropdownSplitOpen: false,\n      modalOpen: false,\n      currentPage: 1,\n      search: \"\",\n      selectedItems: [],\n      lastChecked: null,\n      isLoading: false,\n      confirmModalOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(ProductListPages, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.dataListRender();\n      this.getCategoryList();\n      this.mouseTrap.bind([\"ctrl+a\", \"command+a\"], function () {\n        return _this2.handleChangeSelectAll(false);\n      });\n      this.mouseTrap.bind([\"ctrl+d\", \"command+d\"], function () {\n        _this2.setState({\n          selectedItems: []\n        });\n\n        return false;\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.mouseTrap.unbind(\"ctrl+a\");\n      this.mouseTrap.unbind(\"command+a\");\n      this.mouseTrap.unbind(\"ctrl+d\");\n      this.mouseTrap.unbind(\"command+d\");\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(value, arr, prop) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i][prop] === value) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"dataListRender\",\n    value: function dataListRender() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          selectedPageSize = _this$state.selectedPageSize,\n          currentPage = _this$state.currentPage,\n          selectedOrderOption = _this$state.selectedOrderOption,\n          search = _this$state.search;\n      this.setState({\n        isLoading: false\n      });\n      this.props.getProduct({\n        selectedPageSize,\n        currentPage,\n        selectedOrderOption,\n        search\n      }).then(function (res) {\n        _this3.setState({\n          selectedItems: [],\n          isLoading: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          currentPage = _this$state2.currentPage,\n          displayMode = _this$state2.displayMode,\n          selectedPageSize = _this$state2.selectedPageSize,\n          selectedOrderOption = _this$state2.selectedOrderOption,\n          selectedItems = _this$state2.selectedItems,\n          orderOptions = _this$state2.orderOptions,\n          pageSizes = _this$state2.pageSizes,\n          modalOpen = _this$state2.modalOpen,\n          categories = _this$state2.categories,\n          confirmModalOpen = _this$state2.confirmModalOpen;\n      var _this$props = this.props,\n          items = _this$props.items,\n          totalItemCount = _this$props.totalItem,\n          totalPage = _this$props.totalPage,\n          match = _this$props.match;\n      var startIndex = (currentPage - 1) * selectedPageSize;\n      var endIndex = currentPage * selectedPageSize;\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"disable-text-selection\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListPageHeading, {\n        heading: \"menu.products\",\n        displayModeEnable: 1,\n        displayMode: displayMode,\n        changeDisplayMode: this.changeDisplayMode,\n        handleChangeSelectAll: this.handleChangeSelectAll,\n        changeOrderBy: this.changeOrderBy,\n        changePageSize: this.changePageSize,\n        selectedPageSize: selectedPageSize,\n        totalItemCount: totalItemCount,\n        selectedOrderOption: selectedOrderOption,\n        match: match,\n        startIndex: startIndex,\n        endIndex: endIndex,\n        selectedItems: selectedItems,\n        itemsLength: items ? items.length : 0,\n        onSearchKey: this.onSearchKey,\n        orderOptions: orderOptions,\n        pageSizes: pageSizes,\n        toggleModal: this.toggleModal,\n        handleEditAction: this.handleEditAction,\n        handleActivate: this.handleActivate,\n        handleInactivate: this.handleInactivate,\n        handleDelete: this.handleDelete,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Modal, {\n        isOpen: confirmModalOpen,\n        toggle: this.toggleDeleteConfirmModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(ModalHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }\n      }, \"Delete Product\"), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 25\n        }\n      }, \"Are you sure you want to delete selected product(s)?\"), /*#__PURE__*/React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.deleteProduct,\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 29\n        }\n      }, \"Yes\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: this.toggleDeleteConfirmModal,\n        color: \"secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 29\n        }\n      }, \"Cancel\"))), /*#__PURE__*/React.createElement(AddNewModal, {\n        toggleModal: this.toggleModal,\n        modalOpen: modalOpen,\n        categories: categories,\n        history: this.props.history,\n        match: this.props.match,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }\n      }), !this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 29\n        }\n      }, items.map(function (product) {\n        if (_this4.state.displayMode === \"imagelist\") {\n          return /*#__PURE__*/React.createElement(ImageListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            collect: collect,\n            onCheckItem: _this4.onCheckItem,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 45\n            }\n          });\n        } else if (_this4.state.displayMode === \"thumblist\") {\n          return /*#__PURE__*/React.createElement(ThumbListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            collect: collect,\n            onCheckItem: _this4.onCheckItem,\n            onDelete: _this4.handleDeleteSelectedProduct,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 45\n            }\n          });\n        } else {\n          return /*#__PURE__*/React.createElement(DataListView, {\n            key: product.id,\n            product: product,\n            isSelect: _this4.state.selectedItems.includes(product.id),\n            onCheckItem: _this4.onCheckItem,\n            collect: collect,\n            onDelete: _this4.handleDeleteSelectedProduct,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 45\n            }\n          });\n        }\n      }), \" \", /*#__PURE__*/React.createElement(Pagination, {\n        currentPage: this.state.currentPage,\n        totalPage: totalPage,\n        onChangePage: function onChangePage(i) {\n          return _this4.onChangePage(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 33\n        }\n      }))));\n    }\n  }]);\n\n  return ProductListPages;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var authUser = _ref.authUser,\n      products = _ref.products;\n  var apiToken = authUser.token;\n  var items = products.items,\n      totalItem = products.totalItem,\n      totalPage = products.totalPage;\n  return {\n    apiToken,\n    items,\n    totalItem,\n    totalPage\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getProduct,\n  changeProductsState,\n  deleteProducts\n})(ProductListPages);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/views/products/products/list.js"],"names":["React","Component","Fragment","Row","Modal","ModalHeader","ModalBody","ModalFooter","Button","axios","servicePath","tokenPrefix","getProduct","changeProductsState","deleteProducts","Pagination","ContextMenuContainer","ListPageHeading","ThumbListView","AddNewModal","ImageListView","DataListView","connect","collect","props","data","ProductListPages","toggleModal","setState","modalOpen","state","toggleDeleteConfirmModal","confirmModalOpen","changeOrderBy","column","selectedOrderOption","orderOptions","find","x","dataListRender","changePageSize","size","selectedPageSize","currentPage","changeDisplayMode","mode","displayMode","onChangePage","page","onSearchKey","e","key","search","target","value","toLowerCase","onCheckItem","event","id","tagName","parentElement","lastChecked","selectedItems","includes","filter","push","shiftKey","items","start","getIndex","end","slice","Math","min","max","map","item","Array","from","Set","document","activeElement","blur","handleChangeSelectAll","isToggle","length","getCategoryList","get","headers","apiToken","then","res","categories","handleEditAction","history","match","url","handleActivate","handleInactivate","handleDelete","handleDeleteSelectedProduct","productId","isLoading","deleteProduct","onContextMenu","clickedProductId","mouseTrap","require","label","pageSizes","dropdownSplitOpen","bind","unbind","arr","prop","i","totalItemCount","totalItem","totalPage","startIndex","endIndex","product","mapStateToProps","authUser","products","token"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from \"react\";\r\nimport {Row, Modal, ModalHeader, ModalBody, ModalFooter, Button} from \"reactstrap\";\r\nimport axios from \"axios\";\r\n\r\nimport {servicePath, tokenPrefix} from \"../../../constants/defaultValues\";\r\n\r\nimport {\r\n    getProduct,\r\n    changeProductsState,\r\n    deleteProducts\r\n} from \"../../../redux/actions\";\r\nimport Pagination from \"../../../containers/products/Pagination\";\r\nimport ContextMenuContainer from \"../../../containers/products/ContextMenuContainer\";\r\nimport ListPageHeading from \"../../../containers/products/ListPageHeading\";\r\nimport ThumbListView from \"../../../containers/products/ThumbListView\";\r\nimport AddNewModal from \"../../../containers/products/AddNewModal\";\r\nimport ImageListView from \"../../../containers/products/ImageListView\";\r\nimport DataListView from \"../../../containers/products/DataListView\";\r\nimport {connect} from \"react-redux\";\r\n\r\nfunction collect(props) {\r\n    return {data: props.data};\r\n}\r\n\r\nclass ProductListPages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.mouseTrap = require('mousetrap');\r\n        this.state = {\r\n            displayMode: \"thumblist\",\r\n\r\n            selectedPageSize: 8,\r\n            orderOptions: [\r\n                {column: \"\", label: \"Default\"},\r\n                {column: \"name\", label: \"Product Name\"},\r\n                {column: \"category\", label: \"Category\"},\r\n                {column: \"status\", label: \"Status\"}\r\n            ],\r\n            pageSizes: [8, 12, 24],\r\n\r\n            categories: [],\r\n\r\n            selectedOrderOption: {column: \"\", label: \"Default\"},\r\n            dropdownSplitOpen: false,\r\n            modalOpen: false,\r\n            currentPage: 1,\r\n            search: \"\",\r\n            selectedItems: [],\r\n            lastChecked: null,\r\n            isLoading: false,\r\n\r\n            confirmModalOpen: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.dataListRender();\r\n        this.getCategoryList();\r\n        this.mouseTrap.bind([\"ctrl+a\", \"command+a\"], () =>\r\n            this.handleChangeSelectAll(false)\r\n        );\r\n        this.mouseTrap.bind([\"ctrl+d\", \"command+d\"], () => {\r\n            this.setState({\r\n                selectedItems: []\r\n            });\r\n            return false;\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.mouseTrap.unbind(\"ctrl+a\");\r\n        this.mouseTrap.unbind(\"command+a\");\r\n        this.mouseTrap.unbind(\"ctrl+d\");\r\n        this.mouseTrap.unbind(\"command+d\");\r\n    }\r\n\r\n    toggleModal = () => {\r\n        this.setState({\r\n            modalOpen: !this.state.modalOpen\r\n        });\r\n    };\r\n\r\n    toggleDeleteConfirmModal = () => {\r\n        this.setState({\r\n            confirmModalOpen: !this.state.confirmModalOpen\r\n        });\r\n    };\r\n\r\n    changeOrderBy = column => {\r\n        this.setState(\r\n            {\r\n                selectedOrderOption: this.state.orderOptions.find(\r\n                    x => x.column === column\r\n                )\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n    changePageSize = size => {\r\n        this.setState(\r\n            {\r\n                selectedPageSize: size,\r\n                currentPage: 1\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n    changeDisplayMode = mode => {\r\n        this.setState({\r\n            displayMode: mode\r\n        });\r\n        return false;\r\n    };\r\n    onChangePage = page => {\r\n        this.setState(\r\n            {\r\n                currentPage: page\r\n            },\r\n            () => this.dataListRender()\r\n        );\r\n    };\r\n\r\n    onSearchKey = e => {\r\n        if (e.key === \"Enter\") {\r\n            this.setState(\r\n                {\r\n                    search: e.target.value.toLowerCase()\r\n                },\r\n                () => this.dataListRender()\r\n            );\r\n        }\r\n    };\r\n\r\n    onCheckItem = (event, id) => {\r\n        if (\r\n            event.target.tagName === \"A\" ||\r\n            (event.target.parentElement && event.target.parentElement.tagName === \"A\")\r\n        ) {\r\n            return true;\r\n        }\r\n        if (this.state.lastChecked === null) {\r\n            this.setState({\r\n                lastChecked: id\r\n            });\r\n        }\r\n\r\n        let selectedItems = this.state.selectedItems;\r\n        if (selectedItems.includes(id)) {\r\n            selectedItems = selectedItems.filter(x => x !== id);\r\n        } else {\r\n            selectedItems.push(id);\r\n        }\r\n        this.setState({\r\n            selectedItems\r\n        });\r\n\r\n        if (event.shiftKey) {\r\n            var items = this.props.items;\r\n            var start = this.getIndex(id, items, \"id\");\r\n            var end = this.getIndex(this.state.lastChecked, items, \"id\");\r\n            items = items.slice(Math.min(start, end), Math.max(start, end) + 1);\r\n            selectedItems.push(\r\n                ...items.map(item => {\r\n                    return item.id;\r\n                })\r\n            );\r\n            selectedItems = Array.from(new Set(selectedItems));\r\n            this.setState({\r\n                selectedItems\r\n            });\r\n        }\r\n        document.activeElement.blur();\r\n    };\r\n\r\n    getIndex(value, arr, prop) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i][prop] === value) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    handleChangeSelectAll = isToggle => {\r\n        if (this.state.selectedItems.length >= this.props.items.length) {\r\n            if (isToggle) {\r\n                this.setState({\r\n                    selectedItems: []\r\n                });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                selectedItems: this.props.items.map(x => x.id)\r\n            });\r\n        }\r\n        document.activeElement.blur();\r\n        return false;\r\n    };\r\n\r\n\r\n    dataListRender() {\r\n        const {\r\n            selectedPageSize,\r\n            currentPage,\r\n            selectedOrderOption,\r\n            search\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n\r\n        this.props.getProduct({\r\n            selectedPageSize,\r\n            currentPage,\r\n            selectedOrderOption,\r\n            search\r\n        }).then(res => {\r\n            this.setState({\r\n                selectedItems: [],\r\n                isLoading: true\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    getCategoryList = () => {\r\n        axios\r\n            .get(\r\n                `${servicePath}/categories/all`, {\r\n                    headers: {\r\n                        'X-API-TOKEN': tokenPrefix + this.props.apiToken\r\n                    }\r\n                }\r\n            )\r\n            .then(res => {\r\n                return res.data['data'];\r\n            })\r\n            .then(data => {\r\n                this.setState({\r\n                    categories: data['category_list']\r\n                });\r\n            });\r\n    }\r\n\r\n    handleEditAction = () => {\r\n        if (this.state.selectedItems.length === 1)\r\n            this.props.history.push(this.props.match.url + '/edit/' + this.state.selectedItems[0]);\r\n    }\r\n\r\n    handleActivate = () => {\r\n        if (this.state.selectedItems.length > 0)\r\n            this.props.changeProductsState(this.state.selectedItems, 1);\r\n    }\r\n\r\n    handleInactivate = () => {\r\n        if (this.state.selectedItems.length > 0)\r\n            this.props.changeProductsState(this.state.selectedItems, 0);\r\n    }\r\n\r\n    handleDelete = () => {\r\n        this.toggleDeleteConfirmModal();\r\n    }\r\n\r\n    handleDeleteSelectedProduct = (productId) => {\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n        this.props.deleteProducts([productId])\r\n            .then(res => res ? this.dataListRender() : {});\r\n    }\r\n\r\n    deleteProduct = () => {\r\n        this.toggleDeleteConfirmModal();\r\n        this.setState({\r\n            isLoading: false\r\n        });\r\n        this.props.deleteProducts(this.state.selectedItems)\r\n            .then(res => res ? this.dataListRender() : {});\r\n    }\r\n\r\n    onContextMenu = (e, data) => {\r\n        const clickedProductId = data.data;\r\n        if (!this.state.selectedItems.includes(clickedProductId)) {\r\n            this.setState({\r\n                selectedItems: [clickedProductId]\r\n            });\r\n        }\r\n        return true;\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            currentPage,\r\n            displayMode,\r\n            selectedPageSize,\r\n            selectedOrderOption,\r\n            selectedItems,\r\n            orderOptions,\r\n            pageSizes,\r\n            modalOpen,\r\n            categories,\r\n            confirmModalOpen\r\n        } = this.state;\r\n        const {\r\n            items,\r\n            totalItem: totalItemCount,\r\n            totalPage,\r\n            match\r\n        } = this.props;\r\n        const startIndex = (currentPage - 1) * selectedPageSize;\r\n        const endIndex = currentPage * selectedPageSize;\r\n\r\n        return (\r\n            <Fragment>\r\n                <div className=\"disable-text-selection\">\r\n                    <ListPageHeading\r\n                        heading=\"menu.products\"\r\n                        displayModeEnable={1}\r\n                        displayMode={displayMode}\r\n                        changeDisplayMode={this.changeDisplayMode}\r\n                        handleChangeSelectAll={this.handleChangeSelectAll}\r\n                        changeOrderBy={this.changeOrderBy}\r\n                        changePageSize={this.changePageSize}\r\n                        selectedPageSize={selectedPageSize}\r\n                        totalItemCount={totalItemCount}\r\n                        selectedOrderOption={selectedOrderOption}\r\n                        match={match}\r\n                        startIndex={startIndex}\r\n                        endIndex={endIndex}\r\n                        selectedItems={selectedItems}\r\n                        itemsLength={items ? items.length : 0}\r\n                        onSearchKey={this.onSearchKey}\r\n                        orderOptions={orderOptions}\r\n                        pageSizes={pageSizes}\r\n                        toggleModal={this.toggleModal}\r\n                        handleEditAction={this.handleEditAction}\r\n                        handleActivate={this.handleActivate}\r\n                        handleInactivate={this.handleInactivate}\r\n                        handleDelete={this.handleDelete}\r\n                    />\r\n                    <Modal isOpen={confirmModalOpen} toggle={this.toggleDeleteConfirmModal}>\r\n                        <ModalHeader>Delete Product</ModalHeader>\r\n                        <ModalBody>\r\n                            Are you sure you want to delete selected product(s)?\r\n                        </ModalBody>\r\n                        <ModalFooter>\r\n                            <Button onClick={this.deleteProduct} color=\"primary\">Yes</Button>\r\n                            <Button onClick={this.toggleDeleteConfirmModal} color=\"secondary\">Cancel</Button>\r\n                        </ModalFooter>\r\n                    </Modal>\r\n                    <AddNewModal\r\n                        toggleModal={this.toggleModal}\r\n                        modalOpen={modalOpen}\r\n                        categories={categories}\r\n                        history={this.props.history}\r\n                        match={this.props.match}\r\n                    />\r\n                    {\r\n                        !this.state.isLoading ? (\r\n                                <div className=\"loading\"/>\r\n                            ) :\r\n                            <Row>\r\n                                {items.map(product => {\r\n                                    if (this.state.displayMode === \"imagelist\") {\r\n                                        return (\r\n                                            <ImageListView\r\n                                                key={product.id}\r\n                                                product={product}\r\n                                                isSelect={this.state.selectedItems.includes(product.id)}\r\n                                                collect={collect}\r\n                                                onCheckItem={this.onCheckItem}\r\n                                            />\r\n                                        );\r\n                                    } else if (this.state.displayMode === \"thumblist\") {\r\n                                        return (\r\n                                            <ThumbListView\r\n                                                key={product.id}\r\n                                                product={product}\r\n                                                isSelect={this.state.selectedItems.includes(product.id)}\r\n                                                collect={collect}\r\n                                                onCheckItem={this.onCheckItem}\r\n                                                onDelete={this.handleDeleteSelectedProduct}\r\n                                            />\r\n                                        );\r\n                                    } else {\r\n                                        return (\r\n                                            <DataListView\r\n                                                key={product.id}\r\n                                                product={product}\r\n                                                isSelect={this.state.selectedItems.includes(product.id)}\r\n                                                onCheckItem={this.onCheckItem}\r\n                                                collect={collect}\r\n                                                onDelete={this.handleDeleteSelectedProduct}\r\n                                            />\r\n                                        );\r\n                                    }\r\n                                })}{\" \"}\r\n                                <Pagination\r\n                                    currentPage={this.state.currentPage}\r\n                                    totalPage={totalPage}\r\n                                    onChangePage={i => this.onChangePage(i)}\r\n                                />\r\n                            </Row>\r\n                    }\r\n                </div>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({authUser, products}) => {\r\n    const {token: apiToken} = authUser;\r\n    const {items, totalItem, totalPage} = products;\r\n    return {apiToken, items, totalItem, totalPage};\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {\r\n        getProduct,\r\n        changeProductsState,\r\n        deleteProducts\r\n    }\r\n)(ProductListPages);\r\n\r\n"]},"metadata":{},"sourceType":"module"}