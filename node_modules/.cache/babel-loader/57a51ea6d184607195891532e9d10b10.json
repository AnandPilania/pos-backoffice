{"ast":null,"code":"import _classCallCheck from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{CustomInput,Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Label}from\"reactstrap\";import IntlMessages from\"../../helpers/IntlMessages\";import axios from\"axios\";import{servicePath,tokenPrefix}from\"../../constants/defaultValues\";import errorMessage from\"../../constants/errorMessages\";import{connect}from\"react-redux\";import{NotificationManager}from\"../../components/common/react-notifications\";var AddNewModal=/*#__PURE__*/function(_Component){_inherits(AddNewModal,_Component);var _super=_createSuper(AddNewModal);function AddNewModal(props){var _this;_classCallCheck(this,AddNewModal);_this=_super.call(this,props);_this.onChange=function(e){_this.setState({name:e.target.value});};_this.onStatusChange=function(e){_this.setState({status:e.target.value});};_this.onSubmit=function(){var _this$state=_this.state,name=_this$state.name,status=_this$state.status,loading=_this$state.loading;if(!loading&&name!==\"\"){_this.setState({loading:true});axios.post(servicePath+\"/categories/add\",{\"category-name\":name,\"status\":status},{headers:{'X-API-TOKEN':tokenPrefix+_this.props.apiToken}}).then(function(response){_this.setState({name:\"\",status:\"\",loading:false});if(response.status===200&&response.data['message']===\"\"){NotificationManager.success(\"Successfully Added Category\",\"Success\",3000,null,null,'');_this.props.toggleModal();_this.props.dataListRender();}else{var errorCode=response.data['message'];NotificationManager.warning(errorMessage[errorCode],\"Error\",3000,null,null,'');}}).catch(function(error){_this.setState({name:\"\",status:\"\",loading:false});NotificationManager.warning(error,\"Error\",3000,null,null,'');});}};_this.state={name:\"\",status:\"\",loading:false};return _this;}_createClass(AddNewModal,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Modal,{isOpen:this.props.modalOpen,toggle:this.props.toggleModal,wrapClassName:\"modal-right\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.props.toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.add-new-modal-title\"})),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.category-name\"})),/*#__PURE__*/React.createElement(Input,{onChange:this.onChange}),/*#__PURE__*/React.createElement(Label,{className:\"mt-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.status\"})),/*#__PURE__*/React.createElement(CustomInput,{type:\"radio\",id:\"exCustomRadio\",name:\"customRadio\",label:\"INACTIVE\",value:\"0\",onChange:this.onStatusChange}),/*#__PURE__*/React.createElement(CustomInput,{type:\"radio\",id:\"exCustomRadio2\",name:\"customRadio\",label:\"ACTIVE\",value:\"1\",onChange:this.onStatusChange})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"secondary\",outline:true,onClick:this.props.toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.cancel\"})),/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"btn-shadow btn-multiple-state \".concat(this.state.loading?\"show-spinner\":\"\"),onClick:this.onSubmit},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"label\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.submit\"}))),\" \"));}}]);return AddNewModal;}(Component);var mapStateToProps=function mapStateToProps(_ref){var authUser=_ref.authUser;var apiToken=authUser.token;return{apiToken};};export default connect(mapStateToProps,{})(AddNewModal);","map":{"version":3,"sources":["/Volumes/DATA/project/20200412_POSbackoffice_django_react/project/POS-backoffice/frontend/src/containers/categories/AddNewModal.js"],"names":["React","Component","CustomInput","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Label","IntlMessages","axios","servicePath","tokenPrefix","errorMessage","connect","NotificationManager","AddNewModal","props","onChange","e","setState","name","target","value","onStatusChange","status","onSubmit","state","loading","post","headers","apiToken","then","response","data","success","toggleModal","dataListRender","errorCode","warning","catch","error","modalOpen","mapStateToProps","authUser","token"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {\r\n    CustomInput,\r\n    Button,\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter,\r\n    Input,\r\n    Label\r\n} from \"reactstrap\";\r\n\r\nimport IntlMessages from \"../../helpers/IntlMessages\";\r\nimport axios from \"axios\";\r\nimport {servicePath, tokenPrefix} from \"../../constants/defaultValues\";\r\nimport errorMessage from \"../../constants/errorMessages\";\r\nimport {connect} from \"react-redux\";\r\nimport {NotificationManager} from \"../../components/common/react-notifications\";\r\n\r\nclass AddNewModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            status: \"\",\r\n            loading: false\r\n        };\r\n    }\r\n\r\n    onChange = e => {\r\n        this.setState({\r\n            name: e.target.value\r\n        });\r\n    }\r\n\r\n    onStatusChange = e => {\r\n        this.setState({\r\n            status: e.target.value\r\n        });\r\n    }\r\n\r\n    onSubmit = () => {\r\n        const {name, status, loading} = this.state;\r\n        if (!loading && name !== \"\") {\r\n            this.setState({loading: true});\r\n            axios\r\n                .post(servicePath + \"/categories/add\", {\r\n                    \"category-name\": name,\r\n                    \"status\": status\r\n                }, {\r\n                    headers: {\r\n                        'X-API-TOKEN': tokenPrefix + this.props.apiToken\r\n                    }\r\n                })\r\n                .then(response => {\r\n                    this.setState({\r\n                        name: \"\",\r\n                        status: \"\",\r\n                        loading: false\r\n                    });\r\n                    if (response.status === 200 && response.data['message'] === \"\") {\r\n                        NotificationManager.success(\r\n                            \"Successfully Added Category\",\r\n                            \"Success\",\r\n                            3000,\r\n                            null,\r\n                            null,\r\n                            ''\r\n                        );\r\n                        this.props.toggleModal();\r\n                        this.props.dataListRender();\r\n                    } else {\r\n                        const errorCode = response.data['message'];\r\n                        NotificationManager.warning(\r\n                            errorMessage[errorCode],\r\n                            \"Error\",\r\n                            3000,\r\n                            null,\r\n                            null,\r\n                            ''\r\n                        );\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        name: \"\",\r\n                        status: \"\",\r\n                        loading: false\r\n                    });\r\n                    NotificationManager.warning(\r\n                        error,\r\n                        \"Error\",\r\n                        3000,\r\n                        null,\r\n                        null,\r\n                        ''\r\n                    );\r\n                });\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Modal\r\n                isOpen={this.props.modalOpen}\r\n                toggle={this.props.toggleModal}\r\n                wrapClassName=\"modal-right\"\r\n                backdrop=\"static\"\r\n            >\r\n                <ModalHeader toggle={this.props.toggleModal}>\r\n                    <IntlMessages id=\"pages.add-new-modal-title\"/>\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    <Label>\r\n                        <IntlMessages id=\"pages.category-name\"/>\r\n                    </Label>\r\n                    <Input onChange={this.onChange}/>\r\n\r\n                    <Label className=\"mt-4\">\r\n                        <IntlMessages id=\"pages.status\"/>\r\n                    </Label>\r\n                    <CustomInput\r\n                        type=\"radio\"\r\n                        id=\"exCustomRadio\"\r\n                        name=\"customRadio\"\r\n                        label=\"INACTIVE\"\r\n                        value=\"0\"\r\n                        onChange={this.onStatusChange}\r\n                    />\r\n                    <CustomInput\r\n                        type=\"radio\"\r\n                        id=\"exCustomRadio2\"\r\n                        name=\"customRadio\"\r\n                        label=\"ACTIVE\"\r\n                        value=\"1\"\r\n                        onChange={this.onStatusChange}\r\n                    />\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <Button color=\"secondary\" outline onClick={this.props.toggleModal}>\r\n                        <IntlMessages id=\"pages.cancel\"/>\r\n                    </Button>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        className={`btn-shadow btn-multiple-state ${this.state.loading ? \"show-spinner\" : \"\"}`}\r\n                        onClick={this.onSubmit}\r\n                    >\r\n                        <span className=\"spinner d-inline-block\">\r\n                          <span className=\"bounce1\" />\r\n                          <span className=\"bounce2\" />\r\n                          <span className=\"bounce3\" />\r\n                        </span>\r\n                        <span className=\"label\"><IntlMessages id=\"pages.submit\" /></span>\r\n                    </Button>{\" \"}\r\n                </ModalFooter>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({authUser}) => {\r\n    const {token: apiToken} = authUser;\r\n    return {apiToken};\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(AddNewModal);\r\n\r\n"]},"metadata":{},"sourceType":"module"}